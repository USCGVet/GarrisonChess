/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={390:(e,t,n)=>{var r=n(692),o="abcdefgh".split("");function i(e){if("string"!=typeof e)return!1;var t=e.split("-");return 2===t.length&&!0===a(t[0])&&!0===a(t[1])}function a(e){return"string"==typeof e&&-1!==e.search(/^[a-h][1-8]$/)}function s(e){if("string"!=typeof e)return!1;var t=(e=e.replace(/ .+$/,"")).split("/");if(8!==t.length)return!1;for(var n=0;n<8;n++)if(""===t[n]||t[n].length>8||-1!==t[n].search(/[^kqrbnpKQRNBP1-8]/))return!1;return!0}function c(e){if("object"!=typeof e)return!1;for(var t in e)if(!0===e.hasOwnProperty(t)&&(!0!==a(t)||1!=("string"==typeof(n=e[t])&&-1!==n.search(/^[bw][KQRNBP]$/))))return!1;var n;return!0}function l(e){if(!0!==s(e))return!1;for(var t,n=(e=e.replace(/ .+$/,"")).split("/"),r={},i=8,a=0;a<8;a++){for(var c=n[a].split(""),l=0,u=0;u<c.length;u++)-1!==c[u].search(/[1-8]/)?l+=parseInt(c[u],10):(r[o[l]+i]=(t=c[u]).toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase(),l++);i--}return r}function u(e){if(!0!==c(e))return!1;for(var t,n="",r=8,i=0;i<8;i++){for(var a=0;a<8;a++){var s=o[a]+r;!0===e.hasOwnProperty(s)?n+=(t=void 0,"w"===(t=e[s].split(""))[0]?t[1].toUpperCase():t[1].toLowerCase()):n+="1"}7!==i&&(n+="/"),r--}return(n=(n=(n=(n=(n=(n=n.replace(/11111111/g,"8")).replace(/1111111/g,"7")).replace(/111111/g,"6")).replace(/11111/g,"5")).replace(/1111/g,"4")).replace(/111/g,"3")).replace(/11/g,"2")}var p=function(e,t){t=t||{};var n,p,d,f,h,g,m,v,b,y,x=l("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),w={alpha:"alpha-d2270",black:"black-3c85d",board:"board-b72b1",chessboard:"chessboard-63f37",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",numeric:"numeric-fc462",piece:"piece-417db",row:"row-5277c",sparePieces:"spare-pieces-7492f",sparePiecesBottom:"spare-pieces-bottom-ae20f",sparePiecesTop:"spare-pieces-top-4028b",square:"square-55d63",white:"white-1e1d7"},k={},E=2,S="white",C={},_=!1,T={},q={};function A(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))}function N(e){return JSON.parse(JSON.stringify(e))}function P(e){var t=e.split(".");return{major:parseInt(t[0],10),minor:parseInt(t[1],10),patch:parseInt(t[2],10)}}function I(e,n,r){if(!0===t.hasOwnProperty("showErrors")&&!1!==t.showErrors){var o="ChessBoard Error "+e+": "+n;return"console"===t.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(o),void(arguments.length>=2&&console.log(r))):"alert"===t.showErrors?(r&&(o+="\n\n"+JSON.stringify(r)),void window.alert(o)):void("function"==typeof t.showErrors&&t.showErrors(e,n,r))}}function D(e){return"fast"===e||"slow"===e||parseInt(e,10)+""==e+""&&e>=0}function M(e){return"function"==typeof t.pieceTheme?t.pieceTheme(e):"string"==typeof t.pieceTheme?t.pieceTheme.replace(/{piece}/g,e):(I(8272,"Unable to build image source for cfg.pieceTheme."),"")}function L(e,t,n){var r='<img src="'+M(e)+'" ';return n&&"string"==typeof n&&(r+='id="'+n+'" '),r+='alt="" class="'+w.piece+'" data-piece="'+e+'" style="width: '+g+"px;height: "+g+"px;",!0===t&&(r+="display:none;"),r+'" />'}function O(e){var t=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(t=["bK","bQ","bR","bB","bN","bP"]);for(var n="",r=0;r<t.length;r++)n+=L(t[r],!1,T[t[r]]);return n}function j(e,n,o,i){var a=r("#"+q[e]),s=a.offset(),c=r("#"+q[n]),l=c.offset(),u=A();r("body").append(L(o,!0,u));var p=r("#"+u);p.css({display:"",position:"absolute",top:s.top,left:s.left}),a.find("."+w.piece).remove();var d={duration:t.moveSpeed,complete:function(){c.append(L(o)),p.remove(),"function"==typeof i&&i()}};p.animate(l,d)}function R(e,n,o){var i=r("#"+T[e]).offset(),a=r("#"+q[n]),s=a.offset(),c=A();r("body").append(L(e,!0,c));var l=r("#"+c);l.css({display:"",position:"absolute",left:i.left,top:i.top});var u={duration:t.moveSpeed,complete:function(){a.find("."+w.piece).remove(),a.append(L(e)),l.remove(),"function"==typeof o&&o()}};l.animate(s,u)}function $(e,t){e=e.split("");var n=o.indexOf(e[0])+1,r=parseInt(e[1],10);t=t.split("");var i=o.indexOf(t[0])+1,a=parseInt(t[1],10),s=Math.abs(n-i),c=Math.abs(r-a);return s>=c?s:c}function B(e,t,n){for(var r=function(e){for(var t=[],n=0;n<8;n++)for(var r=0;r<8;r++){var i=o[n]+(r+1);e!==i&&t.push({square:i,distance:$(e,i)})}t.sort((function(e,t){return e.distance-t.distance}));var a=[];for(n=0;n<t.length;n++)a.push(t[n].square);return a}(n),i=0;i<r.length;i++){var a=r[i];if(!0===e.hasOwnProperty(a)&&e[a]===t)return a}return!1}function H(){for(var e in p.find("."+w.piece).remove(),C)!0===C.hasOwnProperty(e)&&r("#"+q[e]).append(L(C[e]))}function F(){p.html(function(e){"black"!==e&&(e="white");var n="",r=N(o),i=8;"black"===e&&(r.reverse(),i=1);for(var a="white",s=0;s<8;s++){n+='<div class="'+w.row+'">';for(var c=0;c<8;c++){var l=r[c]+i;n+='<div class="'+w.square+" "+w[a]+" square-"+l+'" style="width: '+g+"px; height: "+g+'px" id="'+q[l]+'" data-square="'+l+'">',!0===t.showNotation&&(("white"===e&&1===i||"black"===e&&8===i)&&(n+='<div class="'+w.notation+" "+w.alpha+'">'+r[c]+"</div>"),0===c&&(n+='<div class="'+w.notation+" "+w.numeric+'">'+i+"</div>")),n+="</div>",a="white"===a?"black":"white"}n+='<div class="'+w.clearfix+'"></div></div>',a="white"===a?"black":"white","white"===e?i--:i++}return n}(S)),H(),!0===t.sparePieces&&("white"===S?(f.html(O("black")),h.html(O("white"))):(f.html(O("white")),h.html(O("black"))))}function W(e){var n=N(C),r=N(e);u(n)!==u(r)&&(!0===t.hasOwnProperty("onChange")&&"function"==typeof t.onChange&&t.onChange(n,r),C=e)}function z(e,t){for(var n in y)if(!0===y.hasOwnProperty(n)){var r=y[n];if(e>=r.left&&e<r.left+g&&t>=r.top&&t<r.top+g)return n}return"offboard"}function U(){p.find("."+w.square).removeClass(w.highlight1+" "+w.highlight2)}function K(){U();var e=N(C);delete e[b],W(e),H(),d.fadeOut(t.trashSpeed),_=!1}function G(e,n,o,i){"function"==typeof t.onDragStart&&!1===t.onDragStart(e,n,N(C),S)||(_=!0,m=n,b=e,v="spare"===e?"offboard":e,function(){for(var e in y={},q)!0===q.hasOwnProperty(e)&&(y[e]=r("#"+q[e]).offset())}(),d.attr("src",M(n)).css({display:"",position:"absolute",left:o-g/2,top:i-g/2}),"spare"!==e&&r("#"+q[e]).addClass(w.highlight1).find("."+w.piece).css("display","none"))}function Q(e,n){d.css({left:e-g/2,top:n-g/2});var o=z(e,n);o!==v&&(!0===a(v)&&r("#"+q[v]).removeClass(w.highlight2),!0===a(o)&&r("#"+q[o]).addClass(w.highlight2),"function"==typeof t.onDragMove&&t.onDragMove(o,v,b,m,N(C),S),v=o)}function X(e){var n="drop";if("offboard"===e&&"snapback"===t.dropOffBoard&&(n="snapback"),"offboard"===e&&"trash"===t.dropOffBoard&&(n="trash"),!0===t.hasOwnProperty("onDrop")&&"function"==typeof t.onDrop){var o=N(C);"spare"===b&&!0===a(e)&&(o[e]=m),!0===a(b)&&"offboard"===e&&delete o[b],!0===a(b)&&!0===a(e)&&(delete o[b],o[e]=m);var i=N(C),s=t.onDrop(b,e,m,o,i,S);"snapback"!==s&&"trash"!==s||(n=s)}"snapback"===n?function(){if("spare"!==b){U();var e=r("#"+q[b]).offset(),n={duration:t.snapbackSpeed,complete:function(){H(),d.css("display","none"),!0===t.hasOwnProperty("onSnapbackEnd")&&"function"==typeof t.onSnapbackEnd&&t.onSnapbackEnd(m,b,N(C),S)}};d.animate(e,n),_=!1}else K()}():"trash"===n?K():"drop"===n&&function(e){U();var n=N(C);delete n[b],n[e]=m,W(n);var o=r("#"+q[e]).offset(),i={duration:t.snapSpeed,complete:function(){H(),d.css("display","none"),!0===t.hasOwnProperty("onSnapEnd")&&"function"==typeof t.onSnapEnd&&t.onSnapEnd(b,e,m)}};d.animate(o,i),_=!1}(e)}function Y(e){e.preventDefault()}function V(e){if(!0===t.draggable){var n=r(this).attr("data-square");!0===a(n)&&!0===C.hasOwnProperty(n)&&G(n,C[n],e.pageX,e.pageY)}}function J(e){if(!0===t.draggable){var n=r(this).attr("data-square");!0===a(n)&&!0===C.hasOwnProperty(n)&&(e=e.originalEvent,G(n,C[n],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}}function Z(e){!0===t.sparePieces&&G("spare",r(this).attr("data-piece"),e.pageX,e.pageY)}function ee(e){!0===t.sparePieces&&G("spare",r(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}function te(e){!0===_&&Q(e.pageX,e.pageY)}function ne(e){!0===_&&(e.preventDefault(),Q(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function re(e){!0===_&&X(z(e.pageX,e.pageY))}function oe(e){!0===_&&X(z(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function ie(e){if(!1===_&&!0===t.hasOwnProperty("onMouseoverSquare")&&"function"==typeof t.onMouseoverSquare){var n=r(e.currentTarget).attr("data-square");if(!0===a(n)){var o=!1;!0===C.hasOwnProperty(n)&&(o=C[n]),t.onMouseoverSquare(n,o,N(C),S)}}}function ae(e){if(!1===_&&!0===t.hasOwnProperty("onMouseoutSquare")&&"function"==typeof t.onMouseoutSquare){var n=r(e.currentTarget).attr("data-square");if(!0===a(n)){var o=!1;!0===C.hasOwnProperty(n)&&(o=C[n]),t.onMouseoutSquare(n,o,N(C),S)}}}return k.clear=function(e){k.position({},e)},k.destroy=function(){n.html(""),d.remove(),n.unbind()},k.fen=function(){return k.position("fen")},k.flip=function(){return k.orientation("flip")},k.move=function(){if(0!==arguments.length){for(var e=!0,t={},n=0;n<arguments.length;n++)if(!1!==arguments[n])if(!0===i(arguments[n])){var r=arguments[n].split("-");t[r[0]]=r[1]}else I(2826,"Invalid move passed to the move method.",arguments[n]);else e=!1;var o=function(e,t){for(var n in e=N(e),t)if(!0===t.hasOwnProperty(n)&&!0===e.hasOwnProperty(n)){var r=e[n];delete e[n],e[t[n]]=r}return e}(C,t);return k.position(o,e),o}},k.orientation=function(e){return 0===arguments.length?S:"white"===e||"black"===e?(S=e,F(),S):"flip"===e?(S="white"===S?"black":"white",F(),S):void I(5482,"Invalid value passed to the orientation method.",e)},k.position=function(e,n){return 0===arguments.length?N(C):"string"==typeof e&&"fen"===e.toLowerCase()?u(C):(!1!==n&&(n=!0),"string"==typeof e&&"start"===e.toLowerCase()&&(e=N(x)),!0===s(e)&&(e=l(e)),void(!0===c(e)?!0===n?(function(e,n,o){if(0!==e.length)for(var i=0,a=0;a<e.length;a++)"clear"===e[a].type&&r("#"+q[e[a].square]+" ."+w.piece).fadeOut(t.trashSpeed,s),"add"===e[a].type&&!0!==t.sparePieces&&r("#"+q[e[a].square]).append(L(e[a].piece,!0)).find("."+w.piece).fadeIn(t.appearSpeed,s),"add"===e[a].type&&!0===t.sparePieces&&R(e[a].piece,e[a].square,s),"move"===e[a].type&&j(e[a].source,e[a].destination,e[a].piece,s);function s(){++i===e.length&&(H(),!0===t.hasOwnProperty("onMoveEnd")&&"function"==typeof t.onMoveEnd&&t.onMoveEnd(N(n),N(o)))}}(function(e,t){e=N(e),t=N(t);var n=[],r={};for(var o in t)!0===t.hasOwnProperty(o)&&!0===e.hasOwnProperty(o)&&e[o]===t[o]&&(delete e[o],delete t[o]);for(var o in t)if(!0===t.hasOwnProperty(o)){var i=B(e,t[o],o);!1!==i&&(n.push({type:"move",source:i,destination:o,piece:t[o]}),delete e[i],delete t[o],r[o]=!0)}for(var o in t)!0===t.hasOwnProperty(o)&&(n.push({type:"add",square:o,piece:t[o]}),delete t[o]);for(var o in e)!0===e.hasOwnProperty(o)&&!0!==r.hasOwnProperty(o)&&(n.push({type:"clear",square:o,piece:e[o]}),delete e[o]);return n}(C,e),C,e),W(e)):(W(e),H()):I(6482,"Invalid value passed to the position method.",e)))},k.resize=function(){g=function(){var e=parseInt(n.width(),10);if(!e||e<=0)return 0;for(var t=e-1;t%8!=0&&t>0;)t--;return t/8}(),p.css("width",8*g+"px"),d.css({height:g,width:g}),!0===t.sparePieces&&n.find("."+w.sparePieces).css("paddingLeft",g+E+"px"),F()},k.start=function(e){k.position("start",e)},!0===function(){if("string"==typeof e){if(""===e)return window.alert("ChessBoard Error 1001: The first argument to ChessBoard() cannot be an empty string.\n\nExiting..."),!1;var t=document.getElementById(e);if(!t)return window.alert('ChessBoard Error 1002: Element with id "'+e+'" does not exist in the DOM.\n\nExiting...'),!1;n=r(t)}else if(1!==(n=r(e)).length)return window.alert("ChessBoard Error 1003: The first argument to ChessBoard() must be an ID or a single DOM node.\n\nExiting..."),!1;return window.JSON&&"function"==typeof JSON.stringify&&"function"==typeof JSON.parse?(window.$,!(!r.fn||!r.fn.jquery||1!=(o=r.fn.jquery,i="1.7.0",o=P(o),i=P(i),1e4*o.major*1e4+1e4*o.minor+o.patch>=1e4*i.major*1e4+1e4*i.minor+i.patch))||(window.alert("ChessBoard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.7.0 or higher on the page.\n\nExiting..."),!1)):(window.alert("ChessBoard Error 1004: JSON does not exist. Please include a JSON polyfill.\n\nExiting..."),!1);var o,i}()&&1==("string"!=typeof t&&!0!==c(t)||(t={position:t}),"black"!==t.orientation&&(t.orientation="white"),S=t.orientation,!1!==t.showNotation&&(t.showNotation=!0),!0!==t.draggable&&(t.draggable=!1),"trash"!==t.dropOffBoard&&(t.dropOffBoard="snapback"),!0!==t.sparePieces&&(t.sparePieces=!1),!0===t.sparePieces&&(t.draggable=!0),(!0!==t.hasOwnProperty("pieceTheme")||"string"!=typeof t.pieceTheme&&"function"!=typeof t.pieceTheme)&&(t.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),!0===t.hasOwnProperty("appearSpeed")&&!0===D(t.appearSpeed)||(t.appearSpeed=200),!0===t.hasOwnProperty("moveSpeed")&&!0===D(t.moveSpeed)||(t.moveSpeed=200),!0===t.hasOwnProperty("snapbackSpeed")&&!0===D(t.snapbackSpeed)||(t.snapbackSpeed=50),!0===t.hasOwnProperty("snapSpeed")&&!0===D(t.snapSpeed)||(t.snapSpeed=25),!0===t.hasOwnProperty("trashSpeed")&&!0===D(t.trashSpeed)||(t.trashSpeed=100),!0===t.hasOwnProperty("position")&&("start"===t.position?C=N(x):!0===s(t.position)?C=l(t.position):!0===c(t.position)?C=N(t.position):I(7263,"Invalid value passed to config.position.",t.position)),!0)&&(function(){var e;!function(){for(var e=0;e<o.length;e++)for(var t=1;t<=8;t++){var n=o[e]+t;q[n]=n+"-"+A()}var r="KQRBNP".split("");for(e=0;e<r.length;e++){var i="w"+r[e],a="b"+r[e];T[i]=i+"-"+A(),T[a]=a+"-"+A()}}(),n.html((e='<div class="'+w.chessboard+'">',!0===t.sparePieces&&(e+='<div class="'+w.sparePieces+" "+w.sparePiecesTop+'"></div>'),e+='<div class="'+w.board+'"></div>',!0===t.sparePieces&&(e+='<div class="'+w.sparePieces+" "+w.sparePiecesBottom+'"></div>'),e+"</div>")),p=n.find("."+w.board),!0===t.sparePieces&&(f=n.find("."+w.sparePiecesTop),h=n.find("."+w.sparePiecesBottom));var i=A();r("body").append(L("wP",!0,i)),d=r("#"+i),E=parseInt(p.css("borderLeftWidth"),10),k.resize()}(),r("body").on("mousedown mousemove","."+w.piece,Y),p.on("mousedown","."+w.square,V),n.on("mousedown","."+w.sparePieces+" ."+w.piece,Z),p.on("mouseenter","."+w.square,ie).on("mouseleave","."+w.square,ae),!0===(navigator&&navigator.userAgent&&-1!==navigator.userAgent.search(/MSIE/))?(document.ondragstart=function(){return!1},r("body").on("mousemove",te).on("mouseup",re)):r(window).on("mousemove",te).on("mouseup",re),"ontouchstart"in document.documentElement==1&&(p.on("touchstart","."+w.square,J),n.on("touchstart","."+w.sparePieces+" ."+w.piece,ee),r(window).on("touchmove",ne).on("touchend",oe))),k};p.fenToObj=l,p.objToFen=u,e.exports=p},821:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,'/*!\n * chessboard.js $version$\n *\n * Copyright 2013 Chris Oakman\n * Released under the MIT license\n * https://github.com/oakmac/chessboardjs/blob/master/LICENSE\n *\n * Date: $date$\n */\n\n/* clearfix */\n.clearfix-7da63 {\n  clear: both;\n}\n\n/* board */\n.board-b72b1 {\n  border: 2px solid #404040;\n  -webkit-box-sizing: content-box;\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n/* square */\n.square-55d63 {\n  float: left;\n  position: relative;\n\n  /* disable any native browser highlighting */\n  -webkit-touch-callout: none;\n    -webkit-user-select: none;\n     -khtml-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n\n/* white square */\n.white-1e1d7 {\n  background-color: #f0d9b5;\n  color: #b58863;\n}\n\n/* black square */\n.black-3c85d {\n  background-color: #b58863;\n  color: #f0d9b5;\n}\n\n/* highlighted square */\n.highlight1-32417, .highlight2-9c5d2 {\n  -webkit-box-shadow: inset 0 0 3px 3px yellow;\n  -moz-box-shadow: inset 0 0 3px 3px yellow;\n  box-shadow: inset 0 0 3px 3px yellow;\n}\n\n/* notation */\n.notation-322f9 {\n  cursor: default;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  position: absolute;\n}\n.alpha-d2270 {\n  bottom: 1px;\n  right: 3px;\n}\n.numeric-fc462 {\n  top: 2px;\n  left: 2px;\n}',""]);const s=a},365:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,"* {\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;\n    background: radial-gradient(ellipse at top left, #1a0033 0%, #0f0f1e 50%, #0a0a0a 100%);\n    color: #ffffff;\n    text-align: center;\n    min-height: 100vh;\n    margin: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    overflow-x: hidden;\n}\n\nbody::before {\n    content: '';\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-image: \n        radial-gradient(circle at 20% 50%, rgba(138, 43, 226, 0.1) 0%, transparent 50%),\n        radial-gradient(circle at 80% 80%, rgba(75, 0, 130, 0.1) 0%, transparent 50%),\n        radial-gradient(circle at 40% 20%, rgba(147, 112, 219, 0.1) 0%, transparent 50%);\n    pointer-events: none;\n    z-index: 1;\n}\n\n.container {\n    margin: 0;\n    width: 100%;\n    max-width: 1600px;\n    padding: 20px 30px 30px;\n    background: rgba(30, 30, 46, 0.6);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border-radius: 32px;\n    box-shadow: 0 20px 60px rgba(0,0,0,0.5),\n                0 0 0 1px rgba(255,255,255,0.1),\n                inset 0 0 20px rgba(255,255,255,0.05);\n    position: relative;\n    z-index: 2;\n    min-height: calc(100vh - 40px);\n    display: flex;\n    flex-direction: column;\n}\n\n.game-layout {\n    display: grid;\n    grid-template-columns: 350px 1fr 350px;\n    gap: 30px;\n    flex: 1;\n    align-items: start;\n}\n\n.left-panel, .right-panel {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n}\n\n.center-panel {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n}\n\n.game-header {\n    text-align: center;\n    margin-bottom: 10px;\n}\n\n.game-header h1:not(.game-title) {\n    color: #ffffff;\n    font-size: 1.5rem;\n    font-weight: 600;\n    letter-spacing: 0.5px;\n    margin: 0;\n    padding: 12px 28px;\n    background: rgba(138, 43, 226, 0.1);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    border-radius: 16px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    display: inline-block;\n    box-shadow: 0 4px 16px rgba(138, 43, 226, 0.2),\n                inset 0 0 0 1px rgba(255, 255, 255, 0.05);\n}\n\n.game-title {\n    font-size: 28px !important;\n    font-weight: 900 !important;\n    margin: 0 0 5px 0 !important;\n    color: #f4e8d0; /* Fallback color */\n    background: linear-gradient(135deg, #f4e8d0 0%, #8b7fc7 50%, #f4e8d0 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    text-fill-color: transparent;\n    text-transform: uppercase;\n    letter-spacing: 2px !important;\n    animation: titlePulse 3s ease-in-out infinite;\n    padding: 10px 20px !important;\n    display: inline-block !important;\n    position: relative;\n    z-index: 1;\n}\n\n/* Fallback for browsers that don't support background-clip: text */\n@supports not (background-clip: text) or not (-webkit-background-clip: text) {\n    .game-title {\n        background: none !important;\n        color: #f4e8d0 !important;\n        -webkit-text-fill-color: #f4e8d0 !important;\n        text-shadow: 0 0 20px rgba(138, 43, 226, 0.5);\n    }\n}\n\n@keyframes titlePulse {\n    0%, 100% {\n        opacity: 0.9;\n        transform: scale(1);\n    }\n    50% {\n        opacity: 1;\n        transform: scale(1.02);\n    }\n}\n\n.game-header p {\n    color: rgba(255, 255, 255, 0.9);\n    font-size: 16px;\n    margin: 0;\n    font-weight: 500;\n    padding: 8px 20px;\n    background: rgba(255, 255, 255, 0.05);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    border-radius: 12px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    display: inline-block;\n}\n\n\n.controls-section {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.controls-section button,\n.settings button {\n    padding: 16px 28px;\n    font-size: 16px;\n    font-weight: 600;\n    background: rgba(255, 255, 255, 0.05);\n    color: #ffffff;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 16px;\n    cursor: pointer;\n    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n}\n\n.controls-section button::before,\n.settings button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(138, 43, 226, 0.4), rgba(75, 0, 130, 0.4));\n    opacity: 0;\n    transition: opacity 0.4s ease;\n    border-radius: 16px;\n}\n\n.controls-section button:hover,\n.settings button:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 10px 30px rgba(138, 43, 226, 0.3),\n                0 0 0 1px rgba(255, 255, 255, 0.2);\n    border-color: rgba(255, 255, 255, 0.3);\n}\n\n.controls-section button:hover::before,\n.settings button:hover::before {\n    opacity: 1;\n}\n\n.controls-section button:active,\n.settings button:active {\n    transform: translateY(0);\n}\n\n\n.ai-toggle {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 12px;\n    padding: 16px 24px;\n    background: rgba(255, 255, 255, 0.03);\n    border-radius: 16px;\n    backdrop-filter: blur(10px);\n}\n\n.ai-toggle label {\n    color: #ffffff;\n    font-weight: 500;\n    font-size: 18px;\n}\n\n.ai-toggle input[type=\"checkbox\"] {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    accent-color: #8a2be2;\n}\n\n.settings {\n    text-align: left;\n    padding: 24px;\n    background: rgba(255, 255, 255, 0.03);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border-radius: 24px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2),\n                inset 0 0 0 1px rgba(255, 255, 255, 0.05);\n}\n\n.settings h3 {\n    color: #ffffff;\n    margin-top: 0;\n    margin-bottom: 20px;\n    font-size: 20px;\n    font-weight: 600;\n    letter-spacing: -0.5px;\n}\n\n.settings label {\n    display: block;\n    margin-top: 10px;\n}\n\n.settings input {\n    width: 100%;\n    padding: 12px 16px;\n    margin-top: 12px;\n    margin-bottom: 20px;\n    background: rgba(0, 0, 0, 0.3);\n    color: #ffffff;\n    border: 2px solid rgba(255, 255, 255, 0.1);\n    border-radius: 12px;\n    transition: all 0.3s ease;\n    font-size: 16px;\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    box-sizing: border-box;\n}\n\n.settings input:focus {\n    outline: none;\n    border-color: rgba(138, 43, 226, 0.5);\n    box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.1);\n}\n\n.settings label {\n    color: rgba(255, 255, 255, 0.8);\n    font-size: 16px;\n    font-weight: 500;\n    display: block;\n    margin-bottom: 8px;\n}\n\n.material-strength {\n    width: 100%;\n    max-width: 640px;\n    margin-top: 15px;\n    padding: 16px;\n    background: rgba(255, 255, 255, 0.03);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    border-radius: 16px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n}\n\n.strength-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 20px;\n    margin-bottom: 12px;\n}\n\n.strength-bar-container {\n    width: 100%;\n    height: 24px;\n    position: relative;\n}\n\n.strength-bar-track {\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 12px;\n    position: relative;\n    overflow: hidden;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.strength-bar-fill {\n    position: absolute;\n    height: 100%;\n    background: linear-gradient(90deg, #f4e8d0 0%, #8b7fc7 100%);\n    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n    border-radius: 12px;\n}\n\n.strength-bar-center {\n    position: absolute;\n    left: 50%;\n    top: 0;\n    bottom: 0;\n    width: 2px;\n    background: rgba(255, 255, 255, 0.3);\n    transform: translateX(-50%);\n    z-index: 1;\n}\n\n.white-strength, .black-strength {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    font-size: 18px;\n    font-weight: 600;\n}\n\n.white-strength {\n    color: #f4e8d0;\n}\n\n.black-strength {\n    color: #8b7fc7;\n}\n\n.strength-label {\n    opacity: 0.8;\n}\n\n.strength-advantage {\n    font-size: 20px;\n    font-weight: 700;\n    padding: 8px 16px;\n    background: rgba(138, 43, 226, 0.2);\n    border-radius: 12px;\n    border: 1px solid rgba(138, 43, 226, 0.3);\n}\n\n.strength-advantage.white-advantage {\n    color: #f4e8d0;\n    text-shadow: 0 0 10px rgba(244, 232, 208, 0.5);\n}\n\n.strength-advantage.black-advantage {\n    color: #8b7fc7;\n    text-shadow: 0 0 10px rgba(139, 127, 199, 0.5);\n}\n\n.strength-advantage.equal {\n    color: rgba(255, 255, 255, 0.6);\n}\n\n\n.move-history {\n    text-align: left;\n    margin-top: 20px;\n}\n\n.move-history {\n    text-align: left;\n    padding: 24px;\n    background: rgba(255, 255, 255, 0.03);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border-radius: 24px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2),\n                inset 0 0 0 1px rgba(255, 255, 255, 0.05);\n    height: 300px;\n    max-height: 300px;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n.move-history h3 {\n    color: #ffffff;\n    margin-top: 0;\n    margin-bottom: 20px;\n    font-size: 20px;\n    font-weight: 600;\n    letter-spacing: -0.5px;\n}\n\n.move-history ol {\n    flex: 1;\n    overflow-y: auto;\n    padding-left: 30px;\n    color: rgba(255, 255, 255, 0.9);\n    font-size: 16px;\n    line-height: 1.8;\n    font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;\n    margin-bottom: 0;\n    list-style-type: none; /* Remove default list numbering */\n}\n\n.move-history ol::-webkit-scrollbar {\n    width: 8px;\n}\n\n.move-history ol::-webkit-scrollbar-track {\n    background: rgba(0,0,0,0.2);\n    border-radius: 4px;\n}\n\n.move-history ol::-webkit-scrollbar-thumb {\n    background: rgba(138, 43, 226, 0.3);\n    border-radius: 4px;\n}\n\n.move-history ol::-webkit-scrollbar-thumb:hover {\n    background: rgba(138, 43, 226, 0.5);\n}\n\n/* Move color indicators */\n.white-move {\n    color: #ffffff;\n    font-weight: 500;\n}\n\n.black-move {\n    color: #b19cd9; /* Light purple for better visibility */\n    font-weight: 500;\n}\n\n#board {\n    width: 640px;\n    height: 640px;\n    margin: 0;\n    transform: scale(1);\n    transition: transform 0.3s ease;\n}\n\n@media (max-width: 1400px) {\n    #board {\n        width: 560px;\n        height: 560px;\n    }\n    \n    .game-layout {\n        grid-template-columns: 300px 1fr 300px;\n        gap: 20px;\n    }\n}\n\n@media (max-width: 1200px) {\n    .game-layout {\n        grid-template-columns: 1fr;\n        gap: 20px;\n    }\n    \n    .left-panel, .right-panel {\n        flex-direction: row;\n        flex-wrap: wrap;\n    }\n    \n    .container {\n        height: auto;\n        min-height: 100vh;\n    }\n}\n\n/* Mobile reinforcement styles */\n@media (max-width: 768px) {\n    /* Keep reinforcement in document flow on mobile */\n    .reinforcement-container {\n        position: relative !important;\n        width: 100%;\n        max-width: 100%;\n        margin: 15px 0;\n        padding: 15px;\n        order: 2; /* Place after board */\n    }\n    \n    .reinforcement-piece {\n        width: 60px;\n        height: 60px;\n        cursor: pointer;\n    }\n    \n    .reinforcement-piece.selected {\n        background: rgba(138, 43, 226, 0.3);\n        border-color: #8a2be2;\n        box-shadow: 0 0 20px rgba(138, 43, 226, 0.6);\n        animation: pulse-selected 1s infinite;\n    }\n    \n    @keyframes pulse-selected {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.1); }\n    }\n    \n    .reinforcement-instructions {\n        font-size: 12px;\n    }\n    \n    /* Make valid squares more obvious on mobile */\n    .valid-reinforcement-square.mobile-placeable::after {\n        width: 40px;\n        height: 40px;\n        border: 4px solid #4CAF50;\n        background: rgba(76, 175, 80, 0.2);\n        animation: pulse 1s infinite;\n    }\n}\n\n/* Mobile responsive styles */\n@media (max-width: 768px) {\n    body {\n        padding: 10px;\n    }\n    \n    .container {\n        padding: 15px;\n        border-radius: 20px;\n        min-height: calc(100vh - 20px);\n    }\n    \n    .game-title {\n        font-size: 24px;\n    }\n    \n    #board {\n        width: min(90vw, 400px) !important;\n        height: min(90vw, 400px) !important;\n        margin: 0 auto;\n    }\n    \n    .game-layout {\n        display: flex;\n        flex-direction: column;\n        gap: 15px;\n        align-items: center;\n    }\n    \n    .center-panel {\n        order: 1;\n        width: 100%;\n        max-width: none;\n    }\n    \n    .material-strength {\n        order: 2;\n        width: 100%;\n        max-width: min(90vw, 400px);\n        margin-top: 10px;\n        padding: 12px;\n    }\n    \n    .left-panel {\n        order: 3;\n        width: 100%;\n        flex-direction: column;\n    }\n    \n    .right-panel {\n        order: 4;\n        width: 100%;\n        flex-direction: column;\n    }\n    \n    /* Ensure reinforcement container appears in right panel flow */\n    .reinforcement-container {\n        order: 1; /* First in right panel */\n    }\n    \n    .move-history {\n        order: 2; /* After reinforcement */\n    }\n    \n    .controls-section {\n        width: 100%;\n        margin-bottom: 15px;\n    }\n    \n    .settings {\n        width: 100%;\n    }\n    \n    .move-history {\n        width: 100%;\n        max-height: 200px;\n    }\n    \n    button {\n        width: 100%;\n        margin-bottom: 10px;\n    }\n    \n    .strength-info {\n        font-size: 14px;\n    }\n    \n    .strength-bar-container {\n        height: 20px;\n    }\n}\n\n@media (max-width: 480px) {\n    body {\n        padding: 5px;\n    }\n    \n    .container {\n        padding: 10px;\n        border-radius: 15px;\n    }\n    \n    .game-title {\n        font-size: 20px;\n        margin-bottom: 10px;\n    }\n    \n    #board {\n        width: calc(100vw - 30px) !important;\n        height: calc(100vw - 30px) !important;\n    }\n    \n    .material-strength {\n        padding: 10px;\n        font-size: 12px;\n    }\n    \n    .settings label,\n    .settings input {\n        font-size: 12px;\n    }\n    \n    .cpu-indicator {\n        padding: 10px;\n    }\n    \n    .move-history {\n        font-size: 12px;\n        max-height: 150px;\n    }\n    \n    button {\n        padding: 10px 16px;\n        font-size: 14px;\n    }\n    \n    /* Fix game over popup for mobile */\n    .game-over-popup {\n        padding: 30px;\n        width: 95%;\n    }\n    \n    .game-over-crown {\n        font-size: 60px;\n    }\n    \n    .game-over-title {\n        font-size: 32px;\n    }\n    \n    .game-over-message {\n        font-size: 18px;\n    }\n    \n    .stat-value {\n        font-size: 24px;\n    }\n    \n    .game-over-btn {\n        font-size: 16px;\n        padding: 12px 24px;\n    }\n}\n\n/* Modern chess board styling */\n.board-b72b1 {\n    border: none;\n    box-shadow: 0 20px 60px rgba(0,0,0,0.6),\n                0 0 0 1px rgba(255,255,255,0.1),\n                inset 0 0 30px rgba(138, 43, 226, 0.1);\n    border-radius: 16px;\n    overflow: hidden;\n    position: relative;\n    margin: 0 auto !important; /* Center the board */\n}\n\n.board-b72b1::after {\n    content: '';\n    position: absolute;\n    top: -2px;\n    left: -2px;\n    right: -2px;\n    bottom: -2px;\n    background: linear-gradient(45deg, #8a2be2, #4b0082, #8a2be2);\n    border-radius: 16px;\n    opacity: 0.3;\n    z-index: -1;\n    animation: glow 3s ease-in-out infinite;\n}\n\n@keyframes glow {\n    0%, 100% { opacity: 0.3; }\n    50% { opacity: 0.5; }\n}\n\n/* Light squares - warm tone */\n.white-1e1d7 {\n    background: linear-gradient(135deg, #4a4458 0%, #524c60 100%) !important;\n}\n\n/* Dark squares - cool tone */\n.black-3c85d {\n    background: linear-gradient(135deg, #2e2e3e 0%, #323242 100%) !important;\n}\n\n/* Highlight squares - accent color */\n.highlight-white {\n    background: linear-gradient(135deg, #5e5470 0%, #6a5a7c 100%) !important;\n    box-shadow: inset 0 0 20px rgba(138, 43, 226, 0.3) !important;\n}\n\n.highlight-black {\n    background: linear-gradient(135deg, #4a3f5c 0%, #544868 100%) !important;\n    box-shadow: inset 0 0 20px rgba(138, 43, 226, 0.3) !important;\n}\n\n/* Hide default chessboard.js image pieces */\n#board .square-55d63 img {\n    display: none !important;\n}\n\n/* Hide the dragged piece image and drag preview */\n.piece-417db {\n    display: none !important;\n}\n\n/* Hide any drag image created by chessboard.js */\nimg[src=\"\"],\nimg:not([src]),\nimg[src=\" \"] {\n    display: none !important;\n    opacity: 0 !important;\n    visibility: hidden !important;\n}\n\n/* Keep unicode pieces visible during drag */\n.square-55d63.dragging-square .unicode-piece {\n    opacity: 0.5;\n}\n\n/* Add hover effect to squares */\n.square-55d63 {\n    transition: all 0.2s ease;\n    position: relative;\n}\n\n.square-55d63:hover::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: radial-gradient(circle, rgba(138, 43, 226, 0.2) 0%, transparent 70%);\n    pointer-events: none;\n    animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n    0% { opacity: 0; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n}\n\n/* Styles for Unicode font pieces - scaled up */\n.unicode-piece {\n    font-size: 64px;\n    line-height: 1;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    pointer-events: none;\n    transition: transform 0.2s ease;\n}\n\n.unicode-piece:hover {\n    transform: scale(1.1);\n}\n\n/* Piece colors using complementary color theory */\n.white-piece {\n    color: #f4e8d0; /* Warm ivory for white pieces */\n    text-shadow: 0 2px 4px rgba(0,0,0,0.5),\n                 0 0 8px rgba(255,223,186,0.3),\n                 0 0 2px rgba(255,255,255,0.8);\n    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.4));\n}\n\n.black-piece {\n    color: #8b7fc7; /* Purple-tinted for visibility - complementary to board colors */\n    text-shadow: 0 2px 4px rgba(0,0,0,0.8),\n                 0 0 12px rgba(139,127,199,0.5),\n                 0 0 2px rgba(255,255,255,0.2);\n    filter: drop-shadow(0 1px 3px rgba(0,0,0,0.6));\n}\n\n/* Reinforcement container */\n.reinforcement-container {\n    margin-top: 20px;\n    padding: 20px;\n    background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(147, 112, 219, 0.2));\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    border: 1px solid rgba(138, 43, 226, 0.3);\n    border-radius: 16px;\n    color: #f4e8d0;\n    text-align: center;\n    animation: fadeIn 0.5s ease-in-out;\n    box-shadow: 0 4px 20px rgba(138, 43, 226, 0.3);\n}\n\n.reinforcement-header {\n    font-size: 18px;\n    font-weight: 600;\n    margin-bottom: 16px;\n    color: #f4e8d0;\n}\n\n.reinforcement-piece-wrapper {\n    display: flex;\n    justify-content: center;\n    margin: 20px 0;\n}\n\n.reinforcement-piece {\n    width: 80px;\n    height: 80px;\n    background: rgba(255, 255, 255, 0.1);\n    border: 2px dashed rgba(255, 255, 255, 0.4);\n    border-radius: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: grab;\n    transition: all 0.3s ease;\n}\n\n.reinforcement-piece:hover {\n    background: rgba(255, 255, 255, 0.2);\n    border-color: rgba(255, 255, 255, 0.6);\n    transform: scale(1.05);\n}\n\n.reinforcement-piece.dragging {\n    cursor: grabbing;\n    opacity: 0.5;\n}\n\n.reinforcement-piece .unicode-piece {\n    font-size: 60px;\n    line-height: 1;\n    user-select: none;\n}\n\n.reinforcement-instructions {\n    font-size: 14px;\n    color: rgba(244, 232, 208, 0.8);\n    margin-top: 16px;\n}\n\n/* Show/hide instructions based on device */\n.mobile-instruction { display: none; }\n@media (max-width: 768px) {\n    .desktop-instruction { display: none; }\n    .mobile-instruction { display: inline; }\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n        transform: translateY(-10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n/* Highlight valid squares for reinforcement */\n.valid-reinforcement-square {\n    position: relative;\n}\n\n.drag-over {\n    background-color: rgba(138, 43, 226, 0.5) !important;\n    box-shadow: inset 0 0 20px rgba(138, 43, 226, 0.8);\n}\n\n.valid-reinforcement-square::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 30px;\n    height: 30px;\n    border: 3px solid rgba(76, 175, 80, 0.8);\n    border-radius: 50%;\n    animation: pulse 1.5s infinite;\n    pointer-events: none;\n}\n\n@keyframes pulse {\n    0% {\n        transform: translate(-50%, -50%) scale(1);\n        opacity: 1;\n    }\n    50% {\n        transform: translate(-50%, -50%) scale(1.2);\n        opacity: 0.5;\n    }\n    100% {\n        transform: translate(-50%, -50%) scale(1);\n        opacity: 1;\n    }\n}\n\n/* Reinforcement piece placement effects */\n.reinforcement-glow {\n    position: relative;\n    animation: reinforcement-entrance 1.5s ease-out;\n}\n\n/* AI considering reinforcement */\n.reinforcement-considering {\n    animation: reinforcement-considering 1s infinite;\n}\n\n@keyframes reinforcement-considering {\n    0%, 100% {\n        transform: scale(1);\n        opacity: 1;\n    }\n    50% {\n        transform: scale(1.1);\n        opacity: 0.7;\n    }\n}\n\n/* CPU Indicator Styles */\n.cpu-indicator {\n    margin-top: 20px;\n    padding: 15px;\n    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);\n    border-radius: 10px;\n    border: 1px solid rgba(138, 43, 226, 0.3);\n    display: none; /* Hidden by default */\n}\n\n.cpu-indicator.active {\n    display: block;\n}\n\n.cpu-label {\n    text-align: center;\n    color: #8a2be2;\n    font-weight: bold;\n    margin-bottom: 10px;\n    text-transform: uppercase;\n    font-size: 12px;\n    letter-spacing: 1px;\n}\n\n.cpu-cores {\n    display: flex;\n    justify-content: center;\n    gap: 8px;\n    margin-bottom: 10px;\n}\n\n.cpu-core {\n    width: 20px;\n    height: 20px;\n    background: #2c2c3e;\n    border-radius: 4px;\n    position: relative;\n    overflow: hidden;\n}\n\n.cpu-core::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, #8a2be2, transparent);\n    animation: cpu-scan 1.5s infinite;\n}\n\n.cpu-core.active::before {\n    animation: cpu-scan 0.8s infinite;\n}\n\n@keyframes cpu-scan {\n    0% { left: -100%; }\n    100% { left: 100%; }\n}\n\n.cpu-status {\n    display: flex;\n    justify-content: space-between;\n    font-size: 11px;\n    color: #999;\n    margin-bottom: 5px;\n}\n\n.candidate-move {\n    text-align: center;\n    color: #8a2be2;\n    font-size: 14px;\n    margin-top: 5px;\n    min-height: 20px;\n    font-family: 'Courier New', monospace;\n}\n\n/* Thinking indicator on board */\n.thinking-square {\n    position: relative;\n}\n\n.thinking-square::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    animation: thinking-pulse 1s infinite;\n}\n\n/* White thinking - white/silver color */\n.thinking-square.white-thinking::after {\n    border: 2px solid rgba(255, 255, 255, 0.8);\n    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n}\n\n/* Black thinking - dark purple color */\n.thinking-square.black-thinking::after {\n    border: 2px solid rgba(75, 0, 130, 0.9);\n    box-shadow: 0 0 10px rgba(138, 43, 226, 0.6);\n}\n\n/* Piece that's thinking of moving - blinking animation */\n.thinking-piece {\n    animation: piece-blink 0.8s infinite;\n}\n\n/* Smooth piece movement */\n.moving-piece {\n    position: absolute !important;\n    transition: all 0.5s ease-in-out;\n    z-index: 1000;\n}\n\n/* Captured piece fade out */\n.captured-piece {\n    animation: piece-capture 0.5s forwards;\n}\n\n@keyframes piece-capture {\n    0% {\n        opacity: 1;\n        transform: scale(1);\n    }\n    100% {\n        opacity: 0;\n        transform: scale(0.5);\n    }\n}\n\n@keyframes thinking-pulse {\n    0% { \n        transform: translate(-50%, -50%) scale(0.8);\n        opacity: 0.8;\n    }\n    50% { \n        transform: translate(-50%, -50%) scale(1.2);\n        opacity: 0.3;\n    }\n    100% { \n        transform: translate(-50%, -50%) scale(0.8);\n        opacity: 0.8;\n    }\n}\n\n@keyframes piece-blink {\n    0%, 100% { \n        opacity: 1;\n    }\n    50% { \n        opacity: 0.3;\n    }\n}\n\n.reinforcement-glow::before {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 120%;\n    height: 120%;\n    transform: translate(-50%, -50%);\n    background: radial-gradient(circle, \n        rgba(138, 43, 226, 0.8) 0%, \n        rgba(138, 43, 226, 0.4) 40%, \n        transparent 70%);\n    border-radius: 50%;\n    animation: reinforcement-pulse 2s ease-out;\n    pointer-events: none;\n    z-index: 10;\n}\n\n.reinforcement-glow.white-reinforcement::before {\n    background: radial-gradient(circle, \n        rgba(244, 232, 208, 0.9) 0%, \n        rgba(244, 232, 208, 0.5) 40%, \n        transparent 70%);\n    box-shadow: 0 0 60px rgba(244, 232, 208, 0.8),\n                0 0 120px rgba(244, 232, 208, 0.6);\n}\n\n.reinforcement-glow.black-reinforcement::before {\n    background: radial-gradient(circle, \n        rgba(139, 127, 199, 0.9) 0%, \n        rgba(139, 127, 199, 0.5) 40%, \n        transparent 70%);\n    box-shadow: 0 0 60px rgba(139, 127, 199, 0.8),\n                0 0 120px rgba(139, 127, 199, 0.6);\n}\n\n/* Star burst effect */\n.reinforcement-glow::after {\n    content: '✦';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 150px;\n    color: rgba(138, 43, 226, 0.6);\n    animation: star-burst 1.5s ease-out forwards;\n    pointer-events: none;\n    z-index: 9;\n}\n\n.reinforcement-glow.white-reinforcement::after {\n    color: rgba(244, 232, 208, 0.8);\n    text-shadow: 0 0 30px rgba(244, 232, 208, 1);\n}\n\n.reinforcement-glow.black-reinforcement::after {\n    color: rgba(139, 127, 199, 0.8);\n    text-shadow: 0 0 30px rgba(139, 127, 199, 1);\n}\n\n@keyframes reinforcement-entrance {\n    0% {\n        transform: scale(0) rotate(180deg);\n        opacity: 0;\n    }\n    50% {\n        transform: scale(1.3) rotate(90deg);\n        opacity: 1;\n    }\n    100% {\n        transform: scale(1) rotate(0deg);\n        opacity: 1;\n    }\n}\n\n@keyframes reinforcement-pulse {\n    0% {\n        transform: translate(-50%, -50%) scale(0.5);\n        opacity: 0;\n    }\n    50% {\n        transform: translate(-50%, -50%) scale(2);\n        opacity: 1;\n    }\n    100% {\n        transform: translate(-50%, -50%) scale(3);\n        opacity: 0;\n    }\n}\n\n@keyframes star-burst {\n    0% {\n        transform: translate(-50%, -50%) scale(0) rotate(0deg);\n        opacity: 0;\n    }\n    50% {\n        transform: translate(-50%, -50%) scale(1) rotate(180deg);\n        opacity: 1;\n    }\n    100% {\n        transform: translate(-50%, -50%) scale(2) rotate(360deg);\n        opacity: 0;\n    }\n}\n\n/* Ripple effect on the square */\n.reinforcement-square-effect {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: 8;\n}\n\n.reinforcement-square-effect::before,\n.reinforcement-square-effect::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 100%;\n    height: 100%;\n    border: 3px solid rgba(138, 43, 226, 0.6);\n    border-radius: 8px;\n    transform: translate(-50%, -50%);\n    animation: square-ripple 1.5s ease-out;\n}\n\n.reinforcement-square-effect::after {\n    animation-delay: 0.3s;\n}\n\n.reinforcement-square-effect.white-effect::before,\n.reinforcement-square-effect.white-effect::after {\n    border-color: rgba(244, 232, 208, 0.8);\n}\n\n.reinforcement-square-effect.black-effect::before,\n.reinforcement-square-effect.black-effect::after {\n    border-color: rgba(139, 127, 199, 0.8);\n}\n\n@keyframes square-ripple {\n    0% {\n        transform: translate(-50%, -50%) scale(1);\n        opacity: 1;\n    }\n    100% {\n        transform: translate(-50%, -50%) scale(1.5);\n        opacity: 0;\n    }\n}\n\n/* Game Over Popup Styles */\n.game-over-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    backdrop-filter: blur(5px);\n    -webkit-backdrop-filter: blur(5px);\n    display: none;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n    animation: fadeIn 0.3s ease-out;\n}\n\n.game-over-overlay.show {\n    display: flex;\n}\n\n.game-over-popup {\n    background: rgba(255, 255, 255, 0.05);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border-radius: 30px;\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3),\n                0 0 100px rgba(138, 43, 226, 0.2),\n                inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n    padding: 60px;\n    max-width: 500px;\n    width: 90%;\n    text-align: center;\n    transform: scale(0.8) translateY(20px);\n    opacity: 0;\n    animation: popupAppear 0.5s ease-out 0.2s forwards;\n}\n\n.game-over-content {\n    position: relative;\n}\n\n.game-over-crown {\n    font-size: 80px;\n    margin-bottom: 20px;\n    animation: crownFloat 3s ease-in-out infinite;\n    filter: drop-shadow(0 0 20px rgba(244, 232, 208, 0.6));\n    color: #f4e8d0;\n}\n\n.game-over-title {\n    font-size: 48px;\n    font-weight: 700;\n    margin: 0 0 20px 0;\n    background: linear-gradient(135deg, #f4e8d0 0%, #8b7fc7 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    text-shadow: 0 0 30px rgba(138, 43, 226, 0.5);\n}\n\n.game-over-message {\n    font-size: 24px;\n    margin-bottom: 30px;\n    color: rgba(255, 255, 255, 0.9);\n    font-weight: 500;\n}\n\n.game-over-message.white-wins {\n    color: #f4e8d0;\n    text-shadow: 0 0 20px rgba(244, 232, 208, 0.5);\n}\n\n.game-over-message.black-wins {\n    color: #8b7fc7;\n    text-shadow: 0 0 20px rgba(139, 127, 199, 0.5);\n}\n\n.game-over-message.draw {\n    color: rgba(255, 255, 255, 0.7);\n}\n\n.game-over-stats {\n    display: flex;\n    justify-content: center;\n    gap: 40px;\n    margin: 30px 0 40px 0;\n    padding: 25px;\n    background: rgba(255, 255, 255, 0.03);\n    border-radius: 20px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.stat-item {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.stat-label {\n    font-size: 14px;\n    color: rgba(255, 255, 255, 0.6);\n    text-transform: uppercase;\n    letter-spacing: 1px;\n}\n\n.stat-value {\n    font-size: 28px;\n    font-weight: 700;\n    color: #f4e8d0;\n}\n\n.game-over-buttons {\n    display: flex;\n    gap: 20px;\n    justify-content: center;\n    margin-bottom: 20px;\n}\n\n.game-over-close {\n    font-size: 14px;\n    color: rgba(255, 255, 255, 0.5);\n    text-align: center;\n    font-style: italic;\n}\n\n.game-over-btn {\n    padding: 16px 32px;\n    font-size: 18px;\n    font-weight: 600;\n    border: none;\n    border-radius: 16px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n}\n\n.game-over-btn.primary {\n    background: linear-gradient(135deg, #8a2be2 0%, #6a1fb8 100%);\n    color: white;\n    box-shadow: 0 8px 20px rgba(138, 43, 226, 0.3),\n                inset 0 0 0 1px rgba(255, 255, 255, 0.2);\n}\n\n.game-over-btn.primary:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 12px 30px rgba(138, 43, 226, 0.4),\n                inset 0 0 0 1px rgba(255, 255, 255, 0.3);\n}\n\n.game-over-btn.secondary {\n    background: rgba(255, 255, 255, 0.1);\n    color: rgba(255, 255, 255, 0.9);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n}\n\n.game-over-btn.secondary:hover {\n    background: rgba(255, 255, 255, 0.15);\n    border-color: rgba(255, 255, 255, 0.3);\n    transform: translateY(-2px);\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n@keyframes popupAppear {\n    to {\n        transform: scale(1) translateY(0);\n        opacity: 1;\n    }\n}\n\n@keyframes crownFloat {\n    0%, 100% {\n        transform: translateY(0) rotate(-5deg);\n    }\n    50% {\n        transform: translateY(-10px) rotate(5deg);\n    }\n}\n",""]);const s=a},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},692:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(r,o){"use strict";var i=[],a=Object.getPrototypeOf,s=i.slice,c=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},l=i.push,u=i.indexOf,p={},d=p.toString,f=p.hasOwnProperty,h=f.toString,g=h.call(Object),m={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},b=function(e){return null!=e&&e===e.window},y=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,o,i=(n=n||y).createElement("script");if(i.text=e,t)for(r in x)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,o);n.head.appendChild(i).parentNode.removeChild(i)}function k(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[d.call(e)]||"object":typeof e}var E="3.7.1",S=/HTML$/i,C=function(e,t){return new C.fn.init(e,t)};function _(e){var t=!!e&&"length"in e&&e.length,n=k(e);return!v(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}C.fn=C.prototype={jquery:E,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:i.sort,splice:i.splice},C.extend=C.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(C.isPlainObject(r)||(o=Array.isArray(r)))?(n=a[t],i=o&&!Array.isArray(n)?[]:o||C.isPlainObject(n)?n:{},o=!1,a[t]=C.extend(l,i,r)):void 0!==r&&(a[t]=r));return a},C.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=a(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||h.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,o=e.nodeType;if(!o)for(;t=e[r++];)n+=C.text(t);return 1===o||11===o?e.textContent:9===o?e.documentElement.textContent:3===o||4===o?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?C.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!S.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,i=0,a=[];if(_(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&a.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&a.push(o);return c(a)},guid:1,support:m}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=i[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){p["[object "+t+"]"]=t.toLowerCase()}));var q=i.pop,A=i.sort,N=i.splice,P="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");C.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function M(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}C.escapeSelector=function(e){return(e+"").replace(D,M)};var L=y,O=l;!function(){var e,t,n,o,a,c,l,p,d,h,g=O,v=C.expando,b=0,y=0,x=ee(),w=ee(),k=ee(),E=ee(),S=function(e,t){return e===t&&(a=!0),0},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",M="\\["+P+"*("+D+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+P+"*\\]",j=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",R=new RegExp(P+"+","g"),$=new RegExp("^"+P+"*,"+P+"*"),B=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),H=new RegExp(P+"|>"),F=new RegExp(j),W=new RegExp("^"+D+"$"),z={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},U=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),Y=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},V=function(){ce()},J=de((function(e){return!0===e.disabled&&T(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(i=s.call(L.childNodes),L.childNodes),i[L.childNodes.length].nodeType}catch(e){g={apply:function(e,t){O.apply(e,s.call(t))},call:function(e){O.apply(e,s.call(arguments,1))}}}function Z(e,t,n,r){var o,i,a,s,l,u,f,h=t&&t.ownerDocument,b=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return n;if(!r&&(ce(t),t=t||c,p)){if(11!==b&&(l=G.exec(e)))if(o=l[1]){if(9===b){if(!(a=t.getElementById(o)))return n;if(a.id===o)return g.call(n,a),n}else if(h&&(a=h.getElementById(o))&&Z.contains(t,a)&&a.id===o)return g.call(n,a),n}else{if(l[2])return g.apply(n,t.getElementsByTagName(e)),n;if((o=l[3])&&t.getElementsByClassName)return g.apply(n,t.getElementsByClassName(o)),n}if(!(E[e+" "]||d&&d.test(e))){if(f=e,h=t,1===b&&(H.test(e)||B.test(e))){for((h=Q.test(e)&&se(t.parentNode)||t)==t&&m.scope||((s=t.getAttribute("id"))?s=C.escapeSelector(s):t.setAttribute("id",s=v)),i=(u=ue(e)).length;i--;)u[i]=(s?"#"+s:":scope")+" "+pe(u[i]);f=u.join(",")}try{return g.apply(n,h.querySelectorAll(f)),n}catch(t){E(e,!0)}finally{s===v&&t.removeAttribute("id")}}}return be(e.replace(I,"$1"),t,n,r)}function ee(){var e=[];return function n(r,o){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=o}}function te(e){return e[v]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return T(t,"input")&&t.type===e}}function oe(e){return function(t){return(T(t,"input")||T(t,"button"))&&t.type===e}}function ie(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ae(e){return te((function(t){return t=+t,te((function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))}))}))}function se(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var n,r=e?e.ownerDocument||e:L;return r!=c&&9===r.nodeType&&r.documentElement?(l=(c=r).documentElement,p=!C.isXMLDoc(c),h=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&L!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",V),m.getById=ne((function(e){return l.appendChild(e).id=C.expando,!c.getElementsByName||!c.getElementsByName(C.expando).length})),m.disconnectedMatch=ne((function(e){return h.call(e,"*")})),m.scope=ne((function(){return c.querySelectorAll(":scope")})),m.cssHas=ne((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),m.getById?(t.filter.ID=function(e){var t=e.replace(X,Y);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(X,Y);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n,r,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&p)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+P+"*(?:value|"+_+")"),e.querySelectorAll("[id~="+v+"-]").length||d.push("~="),e.querySelectorAll("a#"+v+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+P+"*name"+P+"*="+P+"*(?:''|\"\")")})),m.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),S=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!m.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==L&&Z.contains(L,e)?-1:t===c||t.ownerDocument==L&&Z.contains(L,t)?1:o?u.call(o,e)-u.call(o,t):0:4&n?-1:1)},c):c}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ce(e),p&&!E[t+" "]&&(!d||!d.test(t)))try{var n=h.call(e,t);if(n||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){E(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&ce(e),C.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=c&&ce(e);var r=t.attrHandle[n.toLowerCase()],o=r&&f.call(t.attrHandle,n.toLowerCase())?r(e,n,!p):void 0;return void 0!==o?o:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!m.sortStable,o=!m.sortStable&&s.call(e,0),A.call(e,S),a){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)N.call(e,n[r],1)}return o=null,e},C.fn.uniqueSort=function(){return this.pushStack(C.uniqueSort(s.apply(this)))},t=C.expr={cacheLength:50,createPseudo:te,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,Y),e[3]=(e[3]||e[4]||e[5]||"").replace(X,Y),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&F.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(X,Y).toLowerCase();return"*"===e?function(){return!0}:function(e){return T(e,t)}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&x(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=Z.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(R," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var l,u,p,d,f,h=i!==a?"nextSibling":"previousSibling",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!c&&!s,x=!1;if(g){if(i){for(;h;){for(p=t;p=p[h];)if(s?T(p,m):1===p.nodeType)return!1;f=h="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(x=(d=(l=(u=g[v]||(g[v]={}))[e]||[])[0]===b&&l[1])&&l[2],p=d&&g.childNodes[d];p=++d&&p&&p[h]||(x=d=0)||f.pop();)if(1===p.nodeType&&++x&&p===t){u[e]=[b,d,x];break}}else if(y&&(x=d=(l=(u=t[v]||(t[v]={}))[e]||[])[0]===b&&l[1]),!1===x)for(;(p=++d&&p&&p[h]||(x=d=0)||f.pop())&&(!(s?T(p,m):1===p.nodeType)||!++x||(y&&((u=p[v]||(p[v]={}))[e]=[b,x]),p!==t)););return(x-=o)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,n){var r,o=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return o[v]?o(n):o.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,i=o(e,n),a=i.length;a--;)e[r=u.call(e,i[a])]=!(t[r]=i[a])})):function(e){return o(e,0,r)}):o}},pseudos:{not:te((function(e){var t=[],n=[],r=ve(e.replace(I,"$1"));return r[v]?te((function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))})):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(X,Y),function(t){return(t.textContent||C.text(t)).indexOf(e)>-1}})),lang:te((function(e){return W.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(X,Y).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ie(!1),disabled:ie(!0),checked:function(e){return T(e,"input")&&!!e.checked||T(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return U.test(e.nodeName)},button:function(e){return T(e,"input")&&"button"===e.type||T(e,"button")},text:function(e){var t;return T(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae((function(){return[0]})),last:ae((function(e,t){return[t-1]})),eq:ae((function(e,t,n){return[n<0?n+t:n]})),even:ae((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ae((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ae((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ae((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=oe(e);function le(){}function ue(e,n){var r,o,i,a,s,c,l,u=w[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=t.preFilter;s;){for(a in r&&!(o=$.exec(s))||(o&&(s=s.slice(o[0].length)||s),c.push(i=[])),r=!1,(o=B.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(I," ")}),s=s.slice(r.length)),t.filter)!(o=z[a].exec(s))||l[a]&&!(o=l[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?Z.error(e):w(e,c).slice(0)}function pe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=y++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,c){var l,u,p=[b,s];if(c){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=t[v]||(t[v]={}),o&&T(t,o))t=t[r]||t;else{if((l=u[i])&&l[0]===b&&l[1]===s)return p[2]=l[2];if(u[i]=p,p[2]=e(t,n,c))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function he(e,t,n,r,o){for(var i,a=[],s=0,c=e.length,l=null!=t;s<c;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),l&&t.push(s)));return a}function ge(e,t,n,r,o,i){return r&&!r[v]&&(r=ge(r)),o&&!o[v]&&(o=ge(o,i)),te((function(i,a,s,c){var l,p,d,f,h=[],m=[],v=a.length,b=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)Z(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?b:he(b,h,e,s,c);if(n?n(y,f=o||(i?e:v||r)?[]:a,s,c):f=y,r)for(l=he(f,m),r(l,[],s,c),p=l.length;p--;)(d=l[p])&&(f[m[p]]=!(y[m[p]]=d));if(i){if(o||e){if(o){for(l=[],p=f.length;p--;)(d=f[p])&&l.push(y[p]=d);o(null,f=[],l,c)}for(p=f.length;p--;)(d=f[p])&&(l=o?u.call(i,d):h[p])>-1&&(i[l]=!(a[l]=d))}}else f=he(f===a?f.splice(v,f.length):f),o?o(null,a,f,c):g.apply(a,f)}))}function me(e){for(var r,o,i,a=e.length,s=t.relative[e[0].type],c=s||t.relative[" "],l=s?1:0,p=de((function(e){return e===r}),c,!0),d=de((function(e){return u.call(r,e)>-1}),c,!0),f=[function(e,t,o){var i=!s&&(o||t!=n)||((r=t).nodeType?p(e,t,o):d(e,t,o));return r=null,i}];l<a;l++)if(o=t.relative[e[l].type])f=[de(fe(f),o)];else{if((o=t.filter[e[l].type].apply(null,e[l].matches))[v]){for(i=++l;i<a&&!t.relative[e[i].type];i++);return ge(l>1&&fe(f),l>1&&pe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(I,"$1"),o,l<i&&me(e.slice(l,i)),i<a&&me(e=e.slice(i)),i<a&&pe(e))}f.push(o)}return fe(f)}function ve(e,r){var o,i=[],a=[],s=k[e+" "];if(!s){for(r||(r=ue(e)),o=r.length;o--;)(s=me(r[o]))[v]?i.push(s):a.push(s);s=k(e,function(e,r){var o=r.length>0,i=e.length>0,a=function(a,s,l,u,d){var f,h,m,v=0,y="0",x=a&&[],w=[],k=n,E=a||i&&t.find.TAG("*",d),S=b+=null==k?1:Math.random()||.1,_=E.length;for(d&&(n=s==c||s||d);y!==_&&null!=(f=E[y]);y++){if(i&&f){for(h=0,s||f.ownerDocument==c||(ce(f),l=!p);m=e[h++];)if(m(f,s||c,l)){g.call(u,f);break}d&&(b=S)}o&&((f=!m&&f)&&v--,a&&x.push(f))}if(v+=y,o&&y!==v){for(h=0;m=r[h++];)m(x,w,s,l);if(a){if(v>0)for(;y--;)x[y]||w[y]||(w[y]=q.call(u));w=he(w)}g.apply(u,w),d&&!a&&w.length>0&&v+r.length>1&&C.uniqueSort(u)}return d&&(b=S,n=k),x};return o?te(a):a}(a,i)),s.selector=e}return s}function be(e,n,r,o){var i,a,s,c,l,u="function"==typeof e&&e,d=!o&&ue(e=u.selector||e);if(r=r||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&p&&t.relative[a[1].type]){if(!(n=(t.find.ID(s.matches[0].replace(X,Y),n)||[])[0]))return r;u&&(n=n.parentNode),e=e.slice(a.shift().value.length)}for(i=z.needsContext.test(e)?0:a.length;i--&&(s=a[i],!t.relative[c=s.type]);)if((l=t.find[c])&&(o=l(s.matches[0].replace(X,Y),Q.test(a[0].type)&&se(n.parentNode)||n))){if(a.splice(i,1),!(e=o.length&&pe(a)))return g.apply(r,o),r;break}}return(u||ve(e,d))(o,n,!p,r,!n||Q.test(e)&&se(n.parentNode)||n),r}le.prototype=t.filters=t.pseudos,t.setFilters=new le,m.sortStable=v.split("").sort(S).join("")===v,ce(),m.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))})),C.find=Z,C.expr[":"]=C.expr.pseudos,C.unique=C.uniqueSort,Z.compile=ve,Z.select=be,Z.setDocument=ce,Z.tokenize=ue,Z.escape=C.escapeSelector,Z.getText=C.text,Z.isXML=C.isXMLDoc,Z.selectors=C.expr,Z.support=C.support,Z.uniqueSort=C.uniqueSort}();var j=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&C(e).is(n))break;r.push(e)}return r},R=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},$=C.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(e,t,n){return v(t)?C.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?C.grep(e,(function(e){return u.call(t,e)>-1!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<r;t++)if(C.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)C.find(e,o[t],n);return r>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(H(this,e||[],!1))},not:function(e){return this.pushStack(H(this,e||[],!0))},is:function(e){return!!H(this,"string"==typeof e&&$.test(e)?C(e):e||[],!1).length}});var F,W=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||F,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:W.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),B.test(r[1])&&C.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=y.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,F=C(y);var z=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function K(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&C(e);if(!$.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?C.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?u.call(C(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return j(e,"parentNode")},parentsUntil:function(e,t,n){return j(e,"parentNode",n)},next:function(e){return K(e,"nextSibling")},prev:function(e){return K(e,"previousSibling")},nextAll:function(e){return j(e,"nextSibling")},prevAll:function(e){return j(e,"previousSibling")},nextUntil:function(e,t,n){return j(e,"nextSibling",n)},prevUntil:function(e,t,n){return j(e,"previousSibling",n)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,r){var o=C.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=C.filter(r,o)),this.length>1&&(U[e]||C.uniqueSort(o),z.test(e)&&o.reverse()),this.pushStack(o)}}));var G=/[^\x20\t\r\n\f]+/g;function Q(e){return e}function X(e){throw e}function Y(e,t,n,r){var o;try{e&&v(o=e.promise)?o.call(e).done(t).fail(n):e&&v(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(G)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,r,o,i=[],a=[],s=-1,c=function(){for(o=o||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},l={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){C.each(n,(function(n,r){v(r)?e.unique&&l.has(r)||i.push(r):r&&r.length&&"string"!==k(r)&&t(r)}))}(arguments),n&&!t&&c()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(e){return e?C.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,r){var o=v(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var i=0;function a(e,t,n,o){return function(){var s=this,c=arguments,l=function(){var r,l;if(!(e<i)){if((r=n.apply(s,c))===t.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,v(l)?o?l.call(r,a(i,t,Q,o),a(i,t,X,o)):(i++,l.call(r,a(i,t,Q,o),a(i,t,X,o),a(i,t,Q,t.notifyWith))):(n!==Q&&(s=void 0,c=[r]),(o||t.resolveWith)(s,c))}},u=o?l:function(){try{l()}catch(r){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(r,u.error),e+1>=i&&(n!==X&&(s=void 0,c=[r]),t.rejectWith(s,c))}};e?u():(C.Deferred.getErrorHook?u.error=C.Deferred.getErrorHook():C.Deferred.getStackHook&&(u.error=C.Deferred.getStackHook()),r.setTimeout(u))}}return C.Deferred((function(r){t[0][3].add(a(0,r,v(o)?o:Q,r.notifyWith)),t[1][3].add(a(0,r,v(e)?e:Q)),t[2][3].add(a(0,r,v(n)?n:X))})).promise()},promise:function(e){return null!=e?C.extend(e,o):o}},i={};return C.each(t,(function(e,r){var a=r[2],s=r[5];o[r[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),i[r[0]]=function(){return i[r[0]+"With"](this===i?void 0:this,arguments),this},i[r[0]+"With"]=a.fireWith})),o.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),o=s.call(arguments),i=C.Deferred(),a=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?s.call(arguments):n,--t||i.resolveWith(r,o)}};if(t<=1&&(Y(e,i.done(a(n)).resolve,i.reject,!t),"pending"===i.state()||v(o[n]&&o[n].then)))return i.then();for(;n--;)Y(o[n],a(n),i.reject);return i.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&V.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){r.setTimeout((function(){throw e}))};var J=C.Deferred();function Z(){y.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),C.ready()}C.fn.ready=function(e){return J.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||J.resolveWith(y,[C]))}}),C.ready.then=J.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?r.setTimeout(C.ready):(y.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,o,i,a){var s=0,c=e.length,l=null==n;if("object"===k(n))for(s in o=!0,n)ee(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(C(e),n)})),t))for(;s<c;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):c?t(e[0],n):i},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function oe(e){return e.replace(te,"ms-").replace(ne,re)}var ie=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ae(){this.expando=C.expando+ae.uid++}ae.uid=1,ae.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ie(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[oe(t)]=n;else for(r in t)o[oe(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][oe(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(oe):(t=oe(t))in r?[t]:t.match(G)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||C.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var se=new ae,ce=new ae,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function pe(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(n)}catch(e){}ce.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return ce.hasData(e)||se.hasData(e)},data:function(e,t,n){return ce.access(e,t,n)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=ce.get(i),1===i.nodeType&&!se.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=oe(r.slice(5)),pe(i,r,o[r]));se.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){ce.set(this,e)})):ee(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=ce.get(i,e))||void 0!==(n=pe(i,e))?n:void 0;this.each((function(){ce.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ce.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),n&&(!r||Array.isArray(n)?r=se.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,o=n.shift(),i=C._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,(function(){C.dequeue(e,t)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:C.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=C.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=se.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),he=["Top","Right","Bottom","Left"],ge=y.documentElement,me=function(e){return C.contains(e.ownerDocument,e)},ve={composed:!0};ge.getRootNode&&(me=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});var be=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===C.css(e,"display")};function ye(e,t,n,r){var o,i,a=20,s=r?function(){return r.cur()}:function(){return C.css(e,t,"")},c=s(),l=n&&n[3]||(C.cssNumber[t]?"":"px"),u=e.nodeType&&(C.cssNumber[t]||"px"!==l&&+c)&&fe.exec(C.css(e,t));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;a--;)C.style(e,t,u+l),(1-i)*(1-(i=s()/c||.5))<=0&&(a=0),u/=i;u*=2,C.style(e,t,u+l),n=n||[]}return n&&(u=+u||+c||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=o)),o}var xe={};function we(e){var t,n=e.ownerDocument,r=e.nodeName,o=xe[r];return o||(t=n.body.appendChild(n.createElement(r)),o=C.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),xe[r]=o,o)}function ke(e,t){for(var n,r,o=[],i=0,a=e.length;i<a;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(o[i]=se.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&be(r)&&(o[i]=we(r))):"none"!==n&&(o[i]="none",se.set(r,"display",n)));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}C.fn.extend({show:function(){return ke(this,!0)},hide:function(){return ke(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){be(this)?C(this).show():C(this).hide()}))}});var Ee,Se,Ce=/^(?:checkbox|radio)$/i,_e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Te=/^$|^module$|\/(?:java|ecma)script/i;Ee=y.createDocumentFragment().appendChild(y.createElement("div")),(Se=y.createElement("input")).setAttribute("type","radio"),Se.setAttribute("checked","checked"),Se.setAttribute("name","t"),Ee.appendChild(Se),m.checkClone=Ee.cloneNode(!0).cloneNode(!0).lastChild.checked,Ee.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Ee.cloneNode(!0).lastChild.defaultValue,Ee.innerHTML="<option></option>",m.option=!!Ee.lastChild;var qe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ae(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?C.merge([e],n):n}function Ne(e,t){for(var n=0,r=e.length;n<r;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td,m.option||(qe.optgroup=qe.option=[1,"<select multiple='multiple'>","</select>"]);var Pe=/<|&#?\w+;/;function Ie(e,t,n,r,o){for(var i,a,s,c,l,u,p=t.createDocumentFragment(),d=[],f=0,h=e.length;f<h;f++)if((i=e[f])||0===i)if("object"===k(i))C.merge(d,i.nodeType?[i]:i);else if(Pe.test(i)){for(a=a||p.appendChild(t.createElement("div")),s=(_e.exec(i)||["",""])[1].toLowerCase(),c=qe[s]||qe._default,a.innerHTML=c[1]+C.htmlPrefilter(i)+c[2],u=c[0];u--;)a=a.lastChild;C.merge(d,a.childNodes),(a=p.firstChild).textContent=""}else d.push(t.createTextNode(i));for(p.textContent="",f=0;i=d[f++];)if(r&&C.inArray(i,r)>-1)o&&o.push(i);else if(l=me(i),a=Ae(p.appendChild(i),"script"),l&&Ne(a),n)for(u=0;i=a[u++];)Te.test(i.type||"")&&n.push(i);return p}var De=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function Le(){return!1}function Oe(e,t,n,r,o,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Oe(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Le;else if(!o)return e;return 1===i&&(a=o,o=function(e){return C().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=C.guid++)),e.each((function(){C.event.add(this,t,o,r,n)}))}function je(e,t,n){n?(se.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var n,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),se.set(this,t,r),this[t](),n=se.get(this,t),se.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(se.set(this,t,C.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Me)}})):void 0===se.get(e,t)&&C.event.add(e,t,Me)}C.event={global:{},add:function(e,t,n,r,o){var i,a,s,c,l,u,p,d,f,h,g,m=se.get(e);if(ie(e))for(n.handler&&(n=(i=n).handler,o=i.selector),o&&C.find.matchesSelector(ge,o),n.guid||(n.guid=C.guid++),(c=m.events)||(c=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(G)||[""]).length;l--;)f=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),f&&(p=C.event.special[f]||{},f=(o?p.delegateType:p.bindType)||f,p=C.event.special[f]||{},u=C.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:h.join(".")},i),(d=c[f])||((d=c[f]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(f,a)),p.add&&(p.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),C.event.global[f]=!0)},remove:function(e,t,n,r,o){var i,a,s,c,l,u,p,d,f,h,g,m=se.hasData(e)&&se.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(G)||[""]).length;l--;)if(f=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),f){for(p=C.event.special[f]||{},d=c[f=(r?p.delegateType:p.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=d.length;i--;)u=d[i],!o&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(i,1),u.selector&&d.delegateCount--,p.remove&&p.remove.call(e,u));a&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||C.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)C.event.remove(e,f+t[l],n,r,!0);C.isEmptyObject(c)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=new Array(arguments.length),c=C.event.fix(e),l=(se.get(this,"events")||Object.create(null))[c.type]||[],u=C.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(a=C.event.handlers.call(this,c,l),t=0;(o=a[t++])&&!c.isPropagationStopped();)for(c.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==i.namespace&&!c.rnamespace.test(i.namespace)||(c.handleObj=i,c.data=i.data,void 0!==(r=((C.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,o,i,a,s=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(i=[],a={},n=0;n<c;n++)void 0===a[o=(r=t[n]).selector+" "]&&(a[o]=r.needsContext?C(o,this).index(l)>-1:C.find(o,this,null,[l]).length),a[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return l=this,c<t.length&&s.push({elem:l,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&T(t,"input")&&je(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&T(t,"input")&&je(t,"click"),!0},_default:function(e){var t=e.target;return Ce.test(t.type)&&t.click&&T(t,"input")&&se.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(y.documentMode){var n=se.get(this,"handle"),r=C.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else C.event.simulate(t,e.target,C.event.fix(e))}C.event.special[e]={setup:function(){var r;if(je(this,e,!0),!y.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(r||0)+1)},trigger:function(){return je(this,e),!0},teardown:function(){var e;if(!y.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},C.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=y.documentMode?this:r,i=se.get(o,t);i||(y.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),se.set(o,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=y.documentMode?this:r,i=se.get(o,t)-1;i?se.set(o,t,i):(y.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),se.remove(o,t))}}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||C.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,r){return Oe(this,e,t,n,r)},one:function(e,t,n,r){return Oe(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Le),this.each((function(){C.event.remove(this,e,n,t)}))}});var Re=/<script|<style|<link/i,$e=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function He(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Fe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,r,o,i,a,s;if(1===t.nodeType){if(se.hasData(e)&&(s=se.get(e).events))for(o in se.remove(t,"handle events"),s)for(n=0,r=s[o].length;n<r;n++)C.event.add(t,o,s[o][n]);ce.hasData(e)&&(i=ce.access(e),a=C.extend({},i),ce.set(t,a))}}function Ue(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ce.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ke(e,t,n,r){t=c(t);var o,i,a,s,l,u,p=0,d=e.length,f=d-1,h=t[0],g=v(h);if(g||d>1&&"string"==typeof h&&!m.checkClone&&$e.test(h))return e.each((function(o){var i=e.eq(o);g&&(t[0]=h.call(this,o,i.html())),Ke(i,t,n,r)}));if(d&&(i=(o=Ie(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=i),i||r)){for(s=(a=C.map(Ae(o,"script"),Fe)).length;p<d;p++)l=o,p!==f&&(l=C.clone(l,!0,!0),s&&C.merge(a,Ae(l,"script"))),n.call(e[p],l,p);if(s)for(u=a[a.length-1].ownerDocument,C.map(a,We),p=0;p<s;p++)l=a[p],Te.test(l.type||"")&&!se.access(l,"globalEval")&&C.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?C._evalUrl&&!l.noModule&&C._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):w(l.textContent.replace(Be,""),l,u))}return e}function Ge(e,t,n){for(var r,o=t?C.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||C.cleanData(Ae(r)),r.parentNode&&(n&&me(r)&&Ne(Ae(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),c=me(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(a=Ae(s),r=0,o=(i=Ae(e)).length;r<o;r++)Ue(i[r],a[r]);if(t)if(n)for(i=i||Ae(e),a=a||Ae(s),r=0,o=i.length;r<o;r++)ze(i[r],a[r]);else ze(e,s);return(a=Ae(s,"script")).length>0&&Ne(a,!c&&Ae(e,"script")),s},cleanData:function(e){for(var t,n,r,o=C.event.special,i=0;void 0!==(n=e[i]);i++)if(ie(n)){if(t=n[se.expando]){if(t.events)for(r in t.events)o[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[se.expando]=void 0}n[ce.expando]&&(n[ce.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||He(this,e).appendChild(e)}))},prepend:function(){return Ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=He(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(Ae(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Re.test(e)&&!qe[(_e.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(Ae(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ke(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(Ae(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,r=[],o=C(e),i=o.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),C(o[a])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Qe=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Xe=/^--/,Ye=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ve=function(e,t,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=i[o];return r},Je=new RegExp(he.join("|"),"i");function Ze(e,t,n){var r,o,i,a,s=Xe.test(t),c=e.style;return(n=n||Ye(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(I,"$1")||void 0),""!==a||me(e)||(a=C.style(e,t)),!m.pixelBoxStyles()&&Qe.test(a)&&Je.test(t)&&(r=c.width,o=c.minWidth,i=c.maxWidth,c.minWidth=c.maxWidth=c.width=a,a=n.width,c.width=r,c.minWidth=o,c.maxWidth=i)),void 0!==a?a+"":a}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ge.appendChild(l).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),o=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ge.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var n,o,i,a,s,c,l=y.createElement("div"),u=y.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(m,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,o;return null==s&&(e=y.createElement("table"),t=y.createElement("tr"),n=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ge.appendChild(e).appendChild(t).appendChild(n),o=r.getComputedStyle(t),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,ge.removeChild(e)),s}}))}();var tt=["Webkit","Moz","ms"],nt=y.createElement("div").style,rt={};function ot(e){return C.cssProps[e]||rt[e]||(e in nt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ct(e,t,n){var r=fe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function lt(e,t,n,r,o,i){var a="width"===t?1:0,s=0,c=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=C.css(e,n+he[a],!0,o)),r?("content"===n&&(c-=C.css(e,"padding"+he[a],!0,o)),"margin"!==n&&(c-=C.css(e,"border"+he[a]+"Width",!0,o))):(c+=C.css(e,"padding"+he[a],!0,o),"padding"!==n?c+=C.css(e,"border"+he[a]+"Width",!0,o):s+=C.css(e,"border"+he[a]+"Width",!0,o));return!r&&i>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-c-s-.5))||0),c+l}function ut(e,t,n){var r=Ye(e),o=(!m.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,r),i=o,a=Ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Qe.test(a)){if(!n)return a;a="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&T(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===C.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===C.css(e,"boxSizing",!1,r),(i=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+lt(e,t,n||(o?"border":"content"),i,r,a)+"px"}function pt(e,t,n,r,o){return new pt.prototype.init(e,t,n,r,o)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=oe(t),c=Xe.test(t),l=e.style;if(c||(t=ot(s)),a=C.cssHooks[t]||C.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:l[t];"string"==(i=typeof n)&&(o=fe.exec(n))&&o[1]&&(n=ye(e,t,o),i="number"),null!=n&&n==n&&("number"!==i||c||(n+=o&&o[3]||(C.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var o,i,a,s=oe(t);return Xe.test(t)||(t=ot(s)),(a=C.cssHooks[t]||C.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ze(e,t,r)),"normal"===o&&t in st&&(o=st[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n)return!it.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Ve(e,at,(function(){return ut(e,t,r)}))},set:function(e,n,r){var o,i=Ye(e),a=!m.scrollboxSize()&&"absolute"===i.position,s=(a||r)&&"border-box"===C.css(e,"boxSizing",!1,i),c=r?lt(e,t,r,s,i):0;return s&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-lt(e,t,"border",!1,i)-.5)),c&&(o=fe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),ct(0,n,c)}}})),C.cssHooks.marginLeft=et(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+he[r]+t]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(C.cssHooks[e+t].set=ct)})),C.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,o,i={},a=0;if(Array.isArray(t)){for(r=Ye(e),o=t.length;a<o;a++)i[t[a]]=C.css(e,t[a],!1,r);return i}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)}}),C.Tween=pt,pt.prototype={constructor:pt,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(C.cssNumber[n]?"":"px")},cur:function(){var e=pt.propHooks[this.prop];return e&&e.get?e.get(this):pt.propHooks._default.get(this)},run:function(e){var t,n=pt.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):pt.propHooks._default.set(this),this}},pt.prototype.init.prototype=pt.prototype,pt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},pt.propHooks.scrollTop=pt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=pt.prototype.init,C.fx.step={};var dt,ft,ht=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function mt(){ft&&(!1===y.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(mt):r.setTimeout(mt,C.fx.interval),C.fx.tick())}function vt(){return r.setTimeout((function(){dt=void 0})),dt=Date.now()}function bt(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=he[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function yt(e,t,n){for(var r,o=(xt.tweeners[t]||[]).concat(xt.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function xt(e,t,n){var r,o,i=0,a=xt.prefilters.length,s=C.Deferred().always((function(){delete c.elem})),c=function(){if(o)return!1;for(var t=dt||vt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),i=0,a=l.tweens.length;i<a;i++)l.tweens[i].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||vt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var n,r,o,i,a;for(n in e)if(o=t[r=oe(n)],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=C.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=o);else t[r]=o}(u,l.opts.specialEasing);i<a;i++)if(r=xt.prefilters[i].call(l,e,u,l.opts))return v(r.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return C.map(u,yt,l),v(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),C.fx.timer(C.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}C.Animation=C.extend(xt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ye(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(G);for(var n,r=0,o=e.length;r<o;r++)n=e[r],xt.tweeners[n]=xt.tweeners[n]||[],xt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,i,a,s,c,l,u,p="width"in t||"height"in t,d=this,f={},h=e.style,g=e.nodeType&&be(e),m=se.get(e,"fxshow");for(r in n.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()}))}))),t)if(o=t[r],ht.test(o)){if(delete t[r],i=i||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||C.style(e,r)}if((c=!C.isEmptyObject(t))||!C.isEmptyObject(f))for(r in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=m&&m.display)&&(l=se.get(e,"display")),"none"===(u=C.css(e,"display"))&&(l?u=l:(ke([e],!0),l=e.style.display||l,u=C.css(e,"display"),ke([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===C.css(e,"float")&&(c||(d.done((function(){h.display=l})),null==l&&(u=h.display,l="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(g=m.hidden):m=se.access(e,"fxshow",{display:l}),i&&(m.hidden=!g),g&&ke([e],!0),d.done((function(){for(r in g||ke([e]),se.remove(e,"fxshow"),f)C.style(e,r,f[r])}))),c=yt(g?m[r]:0,r,d),r in m||(m[r]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?xt.prefilters.unshift(e):xt.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return C.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(be).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=C.isEmptyObject(e),i=C.speed(t,n,r),a=function(){var t=xt(this,C.extend({},e),i);(o||se.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",i=C.timers,a=se.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&gt.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=se.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=C.timers,a=r?r.length:0;for(n.finish=!0,C.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(bt(t,!0),e,r,o)}})),C.each({slideDown:bt("show"),slideUp:bt("hide"),slideToggle:bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),dt=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ft||(ft=!0,mt())},C.fx.stop=function(){ft=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(o)}}))},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var wt,kt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return ee(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?C.prop(e,t,n):(1===i&&C.isXMLDoc(e)||(o=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?wt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&T(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(G);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=kt[t]||C.find.attr;kt[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=kt[a],kt[a]=o,o=null!=n(e,t,r)?a:null,kt[a]=i),o}}));var Et=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function Ct(e){return(e.match(G)||[]).join(" ")}function _t(e){return e.getAttribute&&e.getAttribute("class")||""}function Tt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(G)||[]}C.fn.extend({prop:function(e,t){return ee(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&C.isXMLDoc(e)||(t=C.propFix[t]||t,o=C.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,r,o,i,a;return v(e)?this.each((function(t){C(this).addClass(e.call(this,t,_t(this)))})):(t=Tt(e)).length?this.each((function(){if(r=_t(this),n=1===this.nodeType&&" "+Ct(r)+" "){for(i=0;i<t.length;i++)o=t[i],n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=Ct(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,r,o,i,a;return v(e)?this.each((function(t){C(this).removeClass(e.call(this,t,_t(this)))})):arguments.length?(t=Tt(e)).length?this.each((function(){if(r=_t(this),n=1===this.nodeType&&" "+Ct(r)+" "){for(i=0;i<t.length;i++)for(o=t[i];n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=Ct(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,o,i,a=typeof e,s="string"===a||Array.isArray(e);return v(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,_t(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Tt(e),this.each((function(){if(s)for(i=C(this),o=0;o<n.length;o++)r=n[o],i.hasClass(r)?i.removeClass(r):i.addClass(r);else void 0!==e&&"boolean"!==a||((r=_t(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Ct(_t(n))+" ").indexOf(t)>-1)return!0;return!1}});var qt=/\r/g;C.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=v(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,C(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=C.map(o,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=C.valHooks[o.type]||C.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(qt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:Ct(C.text(e))}},select:{get:function(e){var t,n,r,o=e.options,i=e.selectedIndex,a="select-one"===e.type,s=a?null:[],c=a?i+1:o.length;for(r=i<0?c:a?i:0;r<c;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(t=C(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,i=C.makeArray(t),a=o.length;a--;)((r=o[a]).selected=C.inArray(C.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},m.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var At=r.location,Nt={guid:Date.now()},Pt=/\?/;C.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var It=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,o){var i,a,s,c,l,u,p,d,h=[n||y],g=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(a=d=s=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!It.test(g+C.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[C.expando]?e:new C.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),p=C.event.special[g]||{},o||!p.trigger||!1!==p.trigger.apply(n,t))){if(!o&&!p.noBubble&&!b(n)){for(c=p.delegateType||g,It.test(c+g)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(n.ownerDocument||y)&&h.push(s.defaultView||s.parentWindow||r)}for(i=0;(a=h[i++])&&!e.isPropagationStopped();)d=a,e.type=i>1?c:p.bindType||g,(u=(se.get(a,"events")||Object.create(null))[e.type]&&se.get(a,"handle"))&&u.apply(a,t),(u=l&&a[l])&&u.apply&&ie(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(h.pop(),t)||!ie(n)||l&&v(n[g])&&!b(n)&&((s=n[l])&&(n[l]=null),C.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,Dt),n[g](),e.isPropagationStopped()&&d.removeEventListener(g,Dt),C.event.triggered=void 0,s&&(n[l]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}});var Mt=/\[\]$/,Lt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function Rt(e,t,n,r){var o;if(Array.isArray(t))C.each(t,(function(t,o){n||Mt.test(e)?r(e,o):Rt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)}));else if(n||"object"!==k(t))r(e,t);else for(o in t)Rt(e+"["+o+"]",t[o],n,r)}C.param=function(e,t){var n,r=[],o=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){o(this.name,this.value)}));else for(n in e)Rt(n,e[n],t,o);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&jt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!Ce.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:n.replace(Lt,"\r\n")}})).get()}});var $t=/%20/g,Bt=/#.*$/,Ht=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wt=/^(?:GET|HEAD)$/,zt=/^\/\//,Ut={},Kt={},Gt="*/".concat("*"),Qt=y.createElement("a");function Xt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(G)||[];if(v(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Yt(e,t,n,r){var o={},i=e===Kt;function a(s){var c;return o[s]=!0,C.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!=typeof l||i||o[l]?i?!(c=l):void 0:(t.dataTypes.unshift(l),a(l),!1)})),c}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Vt(e,t){var n,r,o=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&C.extend(!0,e,r),e}Qt.href=At.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,C.ajaxSettings),t):Vt(C.ajaxSettings,e)},ajaxPrefilter:Xt(Ut),ajaxTransport:Xt(Kt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,i,a,s,c,l,u,p,d,f=C.ajaxSetup({},t),h=f.context||f,g=f.context&&(h.nodeType||h.jquery)?C(h):C.event,m=C.Deferred(),v=C.Callbacks("once memory"),b=f.statusCode||{},x={},w={},k="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=Ft.exec(i);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?i:null},setRequestHeader:function(e,t){return null==l&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)E.always(e[E.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||k;return n&&n.abort(t),S(0,t),this}};if(m.promise(E),f.url=((e||f.url||At.href)+"").replace(zt,At.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){c=y.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Qt.protocol+"//"+Qt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=C.param(f.data,f.traditional)),Yt(Ut,f,t,E),l)return E;for(p in(u=C.event&&f.global)&&0==C.active++&&C.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Wt.test(f.type),o=f.url.replace(Bt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace($t,"+")):(d=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(Pt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Ht,"$1"),d=(Pt.test(o)?"&":"?")+"_="+Nt.guid+++d),f.url=o+d),f.ifModified&&(C.lastModified[o]&&E.setRequestHeader("If-Modified-Since",C.lastModified[o]),C.etag[o]&&E.setRequestHeader("If-None-Match",C.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&E.setRequestHeader("Content-Type",f.contentType),E.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Gt+"; q=0.01":""):f.accepts["*"]),f.headers)E.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(h,E,f)||l))return E.abort();if(k="abort",v.add(f.complete),E.done(f.success),E.fail(f.error),n=Yt(Kt,f,t,E)){if(E.readyState=1,u&&g.trigger("ajaxSend",[E,f]),l)return E;f.async&&f.timeout>0&&(s=r.setTimeout((function(){E.abort("timeout")}),f.timeout));try{l=!1,n.send(x,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,a,c){var p,d,y,x,w,k=t;l||(l=!0,s&&r.clearTimeout(s),n=void 0,i=c||"",E.readyState=e>0?4:0,p=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var r,o,i,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){c.unshift(o);break}if(c[0]in n)i=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==c[0]&&c.unshift(i),n[i]}(f,E,a)),!p&&C.inArray("script",f.dataTypes)>-1&&C.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),x=function(e,t,n,r){var o,i,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=u.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(a=l[c+" "+i]||l["* "+i]))for(o in l)if((s=o.split(" "))[1]===i&&(a=l[c+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[o]:!0!==l[o]&&(i=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}(f,x,E,p),p?(f.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(C.lastModified[o]=w),(w=E.getResponseHeader("etag"))&&(C.etag[o]=w)),204===e||"HEAD"===f.type?k="nocontent":304===e?k="notmodified":(k=x.state,d=x.data,p=!(y=x.error))):(y=k,!e&&k||(k="error",e<0&&(e=0))),E.status=e,E.statusText=(t||k)+"",p?m.resolveWith(h,[d,k,E]):m.rejectWith(h,[E,k,y]),E.statusCode(b),b=void 0,u&&g.trigger(p?"ajaxSuccess":"ajaxError",[E,f,p?d:y]),v.fireWith(h,[E,k]),u&&(g.trigger("ajaxComplete",[E,f]),--C.active||C.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,r,o){return v(n)&&(o=o||r,r=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:o,data:n,success:r},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Jt={0:200,1223:204},Zt=C.ajaxSettings.xhr();m.cors=!!Zt&&"withCredentials"in Zt,m.ajax=Zt=!!Zt,C.ajaxTransport((function(e){var t,n;if(m.cors||Zt&&!e.crossDomain)return{send:function(o,i){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Jt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}}));var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||C.expando+"_"+Nt.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var o,i,a,s=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(nn,"$1"+o):!1!==e.jsonp&&(e.url+=(Pt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||C.error(o+" was not called"),a[0]},e.dataTypes[0]="json",i=r[o],r[o]=function(){a=arguments},n.always((function(){void 0===i?C(r).removeProp(o):r[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,tn.push(o)),a&&v(i)&&i(a[0]),a=i=void 0})),"script"})),m.createHTMLDocument=((en=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),C.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(r)):t=y),i=!n&&[],(o=B.exec(e))?[t.createElement(o[1])]:(o=Ie([e],t,i),i&&i.length&&C(i).remove(),C.merge([],o.childNodes)));var r,o,i},C.fn.load=function(e,t,n){var r,o,i,a=this,s=e.indexOf(" ");return s>-1&&(r=Ct(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&C.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){i=arguments,a.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var r,o,i,a,s,c,l=C.css(e,"position"),u=C(e),p={};"static"===l&&(e.style.position="relative"),s=u.offset(),i=C.css(e,"top"),c=C.css(e,"left"),("absolute"===l||"fixed"===l)&&(i+c).indexOf("auto")>-1?(a=(r=u.position()).top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(c)||0),v(t)&&(t=t.call(e,n,C.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):u.css(p)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),o.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-C.css(r,"marginTop",!0),left:t.left-o.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ge}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return ee(this,(function(e,r,o){var i;if(b(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o}),e,r,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=et(m.pixelPosition,(function(e,n){if(n)return n=Ze(e,t),Qe.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){C.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return ee(this,(function(t,n,o){var i;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?C.css(t,n,s):C.style(t,n,o,s)}),t,a?o:void 0,a)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=s.call(arguments,2),o=function(){return e.apply(t||this,r.concat(s.call(arguments)))},o.guid=e.guid=e.guid||C.guid++,o},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=T,C.isFunction=v,C.isWindow=b,C.camelCase=oe,C.type=k,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var on=r.jQuery,an=r.$;return C.noConflict=function(e){return r.$===C&&(r.$=an),e&&r.jQuery===C&&(r.jQuery=on),C},void 0===o&&(r.jQuery=r.$=C),C}))},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],u=i[l]||0,p="".concat(l," ").concat(u);i[l]=u+1;var d=n(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var h=o(f,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=r(e,o),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},131:e=>{e.exports&&(e.exports=class{constructor(){this.OPENING_MATERIAL=78,this.ENDGAME_MATERIAL=30,this.stockfishEval=null,this.evalPromise=null,this.weights={kingDanger:.5,materialDeficit:.25,gamePhase:.1,pieceActivity:.1,timing:.05}}setStockfishEval(e){this.stockfishEval=e}async evaluateWithStockfish(e,t=10){return this.stockfishEval?new Promise((n=>{let r=null;const o=e=>{const t=e.data;if(t.includes("info depth")&&t.includes("score cp")){const e=t.match(/score cp (-?\d+)/);e&&(r=parseInt(e[1])/100)}else if(t.includes("info depth")&&t.includes("score mate")){const e=t.match(/score mate (-?\d+)/);if(e){const t=parseInt(e[1]);r=t>0?100:-100}}else t.startsWith("bestmove")&&(this.stockfishEval.removeEventListener("message",o),n(r))};this.stockfishEval.addEventListener("message",o),this.stockfishEval.postMessage(`position fen ${e}`),this.stockfishEval.postMessage(`go depth ${t}`),setTimeout((()=>{this.stockfishEval.removeEventListener("message",o),n(r)}),2e3)})):null}async shouldUseReinforcement(e,t){if(!t||!t.validSquares||0===t.validSquares.length)return!1;if(e.isCheck()&&e.turn()===t.player&&e.moves().length<=3)return console.log("EMERGENCY: In check with very few moves - USE REINFORCEMENT NOW!"),!0;const n=this.calculateMaterial(e);if(("w"===t.player?n.black-n.white:n.white-n.black)>=15&&e.isCheck())return console.log("EMERGENCY: Huge material deficit and in check - USE REINFORCEMENT NOW!"),!0;const r={kingDanger:this.evaluateKingDanger(e,t.player),materialDeficit:this.evaluateMaterialDeficit(e,t.player),gamePhase:this.evaluateGamePhase(e),pieceActivity:this.evaluatePieceActivity(e,t),timing:this.evaluateTiming(e)},o=Object.keys(r).reduce(((e,t)=>e+r[t]*this.weights[t]),0),i=this.getDecisionThreshold(r.gamePhase);if(this.stockfishEval&&o>=.8*i){console.log("Using Stockfish to evaluate reinforcement decision...");const n=await this.evaluateWithStockfish(e.fen(),8);if(null!==n){const e="w"===t.player?n:-n;if(e<-5)return console.log(`Stockfish eval: ${e} - Position is bad, USE REINFORCEMENT!`),!0;if(e<-2&&o>=.9*i)return console.log(`Stockfish eval: ${e} - Position is poor and close to threshold, USE REINFORCEMENT!`),!0}}return console.log("Reinforcement AI Evaluation:",{factors:r,totalScore:o,threshold:i,decision:o>=i?"USE NOW":"WAIT"}),o>=i}evaluateKingDanger(e,t){let n=0;e.isCheck()&&e.turn()===t&&(n+=.6,e.moves().length<=2&&(n+=.3));const r=this.detectCheckmateThreats(e,t);r>0&&(n+=Math.min(.4*r,.8));const o=this.findKing(e,t);if(!o)return 1;const i=o.charCodeAt(0)-97,a=parseInt(o[1])-1;return n+=.2*(1-this.evaluatePawnShield(e,t,i,a)),n+=.3*this.evaluateEnemyProximity(e,t,i,a),n+=.2*this.evaluateKingCenterExposure(i,a),Math.min(n,1)}evaluateMaterialDeficit(e,t){const n=this.calculateMaterial(e),r="w"===t?n.black-n.white:n.white-n.black;return Math.min(r/20,1)}evaluateGamePhase(e){const t=this.calculateMaterial(e),n=t.white+t.black;if(n>=.9*this.OPENING_MATERIAL)return 0;if(n<=this.ENDGAME_MATERIAL)return 1;{const e=.9*this.OPENING_MATERIAL-this.ENDGAME_MATERIAL;return.3+.4*(1-(n-this.ENDGAME_MATERIAL)/e)}}evaluatePieceActivity(e,t){const n=t.piece,r=t.validSquares;let o=0;return r.forEach((r=>{let i=0;const a=r.charCodeAt(0)-97,s=parseInt(r[1])-1,c=(3.5-Math.abs(a-3.5))*(3.5-Math.abs(s-3.5))/12.25;switch(i+=.3*c,n){case"q":i+=.7;break;case"r":i+=this.isOpenFile(e,a)?.6:.3;break;case"n":i+=.5*c;break;case"b":i+=.4;break;case"p":i+=(7-("w"===t.player?7-s:s))/7*.5}o=Math.max(o,i)})),o}evaluateTiming(e){const t=e.history().length;let n=0;return n=t<10?t/20:.5,t>40&&(n+=Math.min((t-40)/40,.5)),n}findKing(e,t){const n=e.board();for(let e=0;e<8;e++)for(let r=0;r<8;r++){const o=n[e][r];if(o&&"k"===o.type&&o.color===t)return String.fromCharCode(97+r)+(8-e)}return null}evaluatePawnShield(e,t,n,r){const o=e.board();let i=0;const a="w"===t?r+1:r-1;if(a>=0&&a<8)for(let e=Math.max(0,n-1);e<=Math.min(7,n+1);e++){const n=o[7-a][e];n&&"p"===n.type&&n.color===t&&(i+=.33)}return i}evaluateEnemyProximity(e,t,n,r){const o=e.board(),i="w"===t?"b":"w";let a=0;for(let e=Math.max(0,r-2);e<=Math.min(7,r+2);e++)for(let t=Math.max(0,n-2);t<=Math.min(7,n+2);t++){const s=o[7-e][t];s&&s.color===i&&(a+=(3-Math.max(Math.abs(e-r),Math.abs(t-n)))/6)}return Math.min(a,1)}isOpenFile(e,t){const n=e.board();let r=!1;for(let e=0;e<8;e++){const o=n[e][t];if(o&&"p"===o.type){r=!0;break}}return!r}calculateMaterial(e){const t=e.board(),n={p:1,n:3,b:3,r:5,q:9,k:0};let r={white:0,black:0};for(let e=0;e<8;e++)for(let o=0;o<8;o++){const i=t[e][o];if(i){const e=n[i.type];"w"===i.color?r.white+=e:r.black+=e}}return r}getDecisionThreshold(e){return e<.3?.5:e<.7?.4:.3}detectCheckmateThreats(e,t){let n=0;const r=new e.constructor;if(r.load(e.fen()),r.turn()!==t){const e=r.moves({verbose:!0});for(const t of e)r.move(t),r.isCheckmate()?n+=2:r.isCheck()&&r.moves().length<=1&&(n+=1),r.undo()}return n}evaluateKingCenterExposure(e,t){return((Math.min(e,7-e)>=2?.5:0)+(t>=2&&t<=5?.3:0))/2}chooseBestSquare(e,t){const n=t.validSquares;if(!n||0===n.length)return null;let r=n[0],o=-1;return n.forEach((n=>{let i=0;const a=n.charCodeAt(0)-97,s=parseInt(n[1])-1,c=(3.5-Math.abs(a-3.5))*(3.5-Math.abs(s-3.5))/12.25;switch(i+=.3*c,0!==a&&7!==a&&0!==s&&7!==s||(i-=.2),t.piece){case"r":i+=this.isOpenFile(e,a)?.5:0;break;case"n":i+=.5*c;break;case"q":i+=.3*c}i>o&&(o=i,r=n)})),r}})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(692),t=n.n(e);const r="w",o="b",i="p",a="b",s="r",c="q",l="k",u="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",p=-1,d={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},f={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},h={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},g={b:[16,32,17,15],w:[-16,-32,-17,-15]},m={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},v=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],b=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],y={p:1,n:2,b:4,r:8,q:16,k:32},x=["n",a,s,c],w={[l]:f.KSIDE_CASTLE,[c]:f.QSIDE_CASTLE},k={w:[{square:h.a1,flag:f.QSIDE_CASTLE},{square:h.h1,flag:f.KSIDE_CASTLE}],b:[{square:h.a8,flag:f.QSIDE_CASTLE},{square:h.h8,flag:f.KSIDE_CASTLE}]},E={b:1,w:6},S=["1-0","0-1","1/2-1/2","*"];function C(e){return e>>4}function _(e){return 15&e}function T(e){return-1!=="0123456789".indexOf(e)}function q(e){const t=_(e),n=C(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function A(e){return e===r?o:r}function N(e,t,n,r,o,a=void 0,s=f.NORMAL){const c=C(r);if(o!==i||7!==c&&0!==c)e.push({color:t,from:n,to:r,piece:o,captured:a,flags:s});else for(let i=0;i<x.length;i++){const c=x[i];e.push({color:t,from:n,to:r,piece:o,captured:a,promotion:c,flags:s|f.PROMOTION})}}function P(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return i}return t=t.toLowerCase(),"o"===t?l:t}function I(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function D(e){return e.split(" ").slice(0,4).join(" ")}var M=n(390),L=n.n(M),O=n(72),j=n.n(O),R=n(825),$=n.n(R),B=n(659),H=n.n(B),F=n(56),W=n.n(F),z=n(540),U=n.n(z),K=n(113),G=n.n(K),Q=n(821),X={};X.styleTagTransform=G(),X.setAttributes=W(),X.insert=H().bind(null,"head"),X.domAPI=$(),X.insertStyleElement=U(),j()(Q.A,X),Q.A&&Q.A.locals&&Q.A.locals;var Y=n(365),V={};V.styleTagTransform=G(),V.setAttributes=W(),V.insert=H().bind(null,"head"),V.domAPI=$(),V.insertStyleElement=U(),j()(Y.A,V),Y.A&&Y.A.locals&&Y.A.locals;var J=n(131),Z=n.n(J);window.addEventListener("error",(function(e){if(e.message&&e.message.includes("[object Object]"))return console.error("Caught error:",e),e.preventDefault(),!0})),window.addEventListener("unhandledrejection",(function(e){console.error("Unhandled promise rejection:",e.reason),e.preventDefault()}));const ee=new class{_board=new Array(128);_turn=r;_header={};_kings={w:p,b:p};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_positionCount={};constructor(e=u){this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:p,b:p},this._turn=r,this._castling={w:0,b:0},this._epSquare=p,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:t=!1,preserveHeaders:n=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const t=["-","-","0","1"];e=i.concat(t.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!t){const{ok:t,error:n}=function(e){const t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=t[0].split("/");if(8!==o.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<o.length;e++){let t=0,n=!1;for(let r=0;r<o[e].length;r++)if(T(o[e][r])){if(n)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(o[e][r],10),n=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[e][r]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,n=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:e,regex:n}of i){if(!n.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(n)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(o[0]+o[7]).some((e=>"P"===e.toUpperCase()))?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw new Error(n)}const a=i[0];let s=0;this.clear({preserveHeaders:n});for(let e=0;e<a.length;e++){const t=a.charAt(e);if("/"===t)s+=8;else if(T(t))s+=parseInt(t,10);else{const e=t<"a"?r:o;this._put({type:t.toLowerCase(),color:e},q(s)),s++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=f.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=f.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=f.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=f.QSIDE_CASTLE),this._epSquare="-"===i[3]?p:h[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){let e=0,t="";for(let n=h.a8;n<=h.h1;n++){if(this._board[n]){e>0&&(t+=e,e=0);const{color:o,type:i}=this._board[n];t+=o===r?i.toUpperCase():i.toLowerCase()}else e++;n+1&136&&(e>0&&(t+=e),n!==h.h1&&(t+="/"),e=0,n+=8)}let n="";this._castling[r]&f.KSIDE_CASTLE&&(n+="K"),this._castling[r]&f.QSIDE_CASTLE&&(n+="Q"),this._castling[o]&f.KSIDE_CASTLE&&(n+="k"),this._castling[o]&f.QSIDE_CASTLE&&(n+="q"),n=n||"-";let a="-";if(this._epSquare!==p){const e=this._epSquare+(this._turn===r?16:-16),t=[e+1,e-1];for(const e of t){if(136&e)continue;const t=this._turn;if(this._board[e]?.color===t&&this._board[e]?.type===i){this._makeMove({color:t,from:e,to:this._epSquare,piece:i,captured:i,flags:f.EP_CAPTURE});const n=!this._isKingAttacked(t);if(this._undoMove(),n){a=q(this._epSquare);break}}}}return[t,this._turn,n,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==u?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(u)}get(e){return this._board[h[e]]||!1}put({type:e,color:t},n){return!!this._put({type:e,color:t},n)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_put({type:e,color:t},n){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase()))return!1;if(!(n in h))return!1;const r=h[n];if(e==l&&this._kings[t]!=p&&this._kings[t]!=r)return!1;const o=this._board[r];return o&&o.type===l&&(this._kings[o.color]=p),this._board[r]={type:e,color:t},e===l&&(this._kings[t]=r),!0}remove(e){const t=this.get(e);return delete this._board[h[e]],t&&t.type===l&&(this._kings[t.color]=p),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){const e=this._board[h.e1]?.type===l&&this._board[h.e1]?.color===r,t=this._board[h.e8]?.type===l&&this._board[h.e8]?.color===o;e&&this._board[h.a1]?.type===s&&this._board[h.a1]?.color===r||(this._castling.w&=~f.QSIDE_CASTLE),e&&this._board[h.h1]?.type===s&&this._board[h.h1]?.color===r||(this._castling.w&=~f.KSIDE_CASTLE),t&&this._board[h.a8]?.type===s&&this._board[h.a8]?.color===o||(this._castling.b&=~f.QSIDE_CASTLE),t&&this._board[h.h8]?.type===s&&this._board[h.h8]?.color===o||(this._castling.b&=~f.KSIDE_CASTLE)}_updateEnPassantSquare(){if(this._epSquare===p)return;const e=this._epSquare+(this._turn===r?-16:16),t=this._epSquare+(this._turn===r?16:-16),n=[t+1,t-1];null===this._board[e]&&null===this._board[this._epSquare]&&this._board[t]?.color===A(this._turn)&&this._board[t]?.type===i&&n.some((e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type===i))||(this._epSquare=p)}_attacked(e,t){for(let n=h.a8;n<=h.h1;n++){if(136&n){n+=7;continue}if(void 0===this._board[n]||this._board[n].color!==e)continue;const a=this._board[n],s=n-t;if(0===s)continue;const c=s+119;if(v[c]&y[a.type]){if(a.type===i){if(s>0){if(a.color===r)return!0}else if(a.color===o)return!0;continue}if("n"===a.type||"k"===a.type)return!0;const e=b[c];let l=n+e,u=!1;for(;l!==t;){if(null!=this._board[l]){u=!0;break}l+=e}if(!u)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return-1!==t&&this._attacked(A(e),t)}isAttacked(e,t){return this._attacked(t,h[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let n=0,r=0;for(let o=h.a8;o<=h.h1;o++){if(r=(r+1)%2,136&o){o+=7;continue}const i=this._board[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===a&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[a]||1===e.n))return!0;if(n===e[a]+2){let e=0;const n=t.length;for(let r=0;r<n;r++)e+=t[r];if(0===e||e===n)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:n}={}){const r=this._moves({square:t,piece:n});return e?r.map((e=>this._makePretty(e))):r.map((e=>this._moveToSan(e,r)))}_moves({legal:e=!0,piece:t,square:n}={}){const r=n?n.toLowerCase():void 0,o=t?.toLowerCase(),a=[],s=this._turn,c=A(s);let u=h.a8,p=h.h1,d=!1;if(r){if(!(r in h))return[];u=p=h[r],d=!0}for(let e=u;e<=p;e++){if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===c)continue;const{type:t}=this._board[e];let n;if(t===i){if(o&&o!==t)continue;n=e+g[s][0],this._board[n]||(N(a,s,e,n,i),n=e+g[s][1],E[s]!==C(e)||this._board[n]||N(a,s,e,n,i,void 0,f.BIG_PAWN));for(let t=2;t<4;t++)n=e+g[s][t],136&n||(this._board[n]?.color===c?N(a,s,e,n,i,this._board[n].type,f.CAPTURE):n===this._epSquare&&N(a,s,e,n,i,i,f.EP_CAPTURE))}else{if(o&&o!==t)continue;for(let r=0,o=m[t].length;r<o;r++){const o=m[t][r];for(n=e;n+=o,!(136&n);){if(this._board[n]){if(this._board[n].color===s)break;N(a,s,e,n,t,this._board[n].type,f.CAPTURE);break}if(N(a,s,e,n,t),"n"===t||t===l)break}}}}if(!(void 0!==o&&o!==l||d&&p!==this._kings[s])){if(this._castling[s]&f.KSIDE_CASTLE){const e=this._kings[s],t=e+2;this._board[e+1]||this._board[t]||this._attacked(c,this._kings[s])||this._attacked(c,e+1)||this._attacked(c,t)||N(a,s,this._kings[s],t,l,void 0,f.KSIDE_CASTLE)}if(this._castling[s]&f.QSIDE_CASTLE){const e=this._kings[s],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(c,this._kings[s])||this._attacked(c,e-1)||this._attacked(c,t)||N(a,s,this._kings[s],t,l,void 0,f.QSIDE_CASTLE)}}if(!e||-1===this._kings[s])return a;const v=[];for(let e=0,t=a.length;e<t;e++)this._makeMove(a[e]),this._isKingAttacked(s)||v.push(a[e]),this._undoMove();return v}move(e,{strict:t=!1}={}){let n=null;if("string"==typeof e)n=this._moveFromSan(e,t);else if("object"==typeof e){const t=this._moves();for(let r=0,o=t.length;r<o;r++)if(e.from===q(t[r].from)&&e.to===q(t[r].to)&&(!("promotion"in t[r])||e.promotion===t[r].promotion)){n=t[r];break}}if(!n)throw"string"==typeof e?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const r=this._makePretty(n);return this._makeMove(n),this._incPositionCount(r.after),r}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,n=A(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&f.EP_CAPTURE&&(this._turn===o?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===l){if(this._kings[t]=e.to,e.flags&f.KSIDE_CASTLE){const t=e.to-1,n=e.to+1;this._board[t]=this._board[n],delete this._board[n]}else if(e.flags&f.QSIDE_CASTLE){const t=e.to+1,n=e.to-2;this._board[t]=this._board[n],delete this._board[n]}this._castling[t]=0}if(this._castling[t])for(let n=0,r=k[t].length;n<r;n++)if(e.from===k[t][n].square&&this._castling[t]&k[t][n].flag){this._castling[t]^=k[t][n].flag;break}if(this._castling[n])for(let t=0,r=k[n].length;t<r;t++)if(e.to===k[n][t].square&&this._castling[n]&k[n][t].flag){this._castling[n]^=k[n][t].flag;break}e.flags&f.BIG_PAWN?this._epSquare=t===o?e.to-16:e.to+16:this._epSquare=p,e.piece===i||e.flags&(f.CAPTURE|f.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===o&&this._moveNumber++,this._turn=n}undo(){const e=this._undoMove();if(e){const t=this._makePretty(e);return this._decPositionCount(t.after),t}return null}_undoMove(){const e=this._history.pop();if(void 0===e)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const n=this._turn,r=A(n);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&f.EP_CAPTURE){let e;e=n===o?t.to-16:t.to+16,this._board[e]={type:i,color:r}}else this._board[t.to]={type:t.captured,color:r};if(t.flags&(f.KSIDE_CASTLE|f.QSIDE_CASTLE)){let e,n;t.flags&f.KSIDE_CASTLE?(e=t.to+1,n=t.to-1):(e=t.to-2,n=t.to+1),this._board[e]=this._board[n],delete this._board[n]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){const n=[];let r=!1;for(const t in this._header)n.push("["+t+' "'+this._header[t]+'"]'+e),r=!0;r&&this._history.length&&n.push(e);const o=e=>{const t=this._comments[this.fen()];return void 0!==t&&(e=`${e}${e.length>0?" ":""}{${t}}`),e},i=[];for(;this._history.length>0;)i.push(this._undoMove());const a=[];let s="";for(0===i.length&&a.push(o(""));i.length>0;){s=o(s);const e=i.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(s.length&&a.push(s),s=this._moveNumber+".");else{const e=`${this._moveNumber}. ...`;s=s?`${s} ${e}`:e}s=s+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(s.length&&a.push(o(s)),void 0!==this._header.Result&&a.push(this._header.Result),0===t)return n.join("")+a.join(" ");const c=function(){return n.length>0&&" "===n[n.length-1]&&(n.pop(),!0)},l=function(r,o){for(const i of o.split(" "))if(i){if(r+i.length>t){for(;c();)r--;n.push(e),r=0}n.push(i),r+=i.length,n.push(" "),r++}return c()&&r--,r};let u=0;for(let r=0;r<a.length;r++)u+a[r].length>t&&a[r].includes("{")?u=l(u,a[r]):(u+a[r].length>t&&0!==r?(" "===n[n.length-1]&&n.pop(),n.push(e),u=0):0!==r&&(n.push(" "),u++),n.push(a[r]),u+=a[r].length);return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:n="\r?\n"}={}){function r(e){return e.replace(/\\/g,"\\")}e=e.trim();const o=new RegExp("^(\\[((?:"+r(n)+")|.)*\\])((?:\\s*"+r(n)+"){2}|(?:\\s*"+r(n)+")*$)").exec(e),i=o&&o.length>=2?o[1]:"";this.reset();const a=function(e){const t={},o=e.split(new RegExp(r(n)));let i="",a="";for(let e=0;e<o.length;e++){const n=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;i=o[e].replace(n,"$1"),a=o[e].replace(n,"$2"),i.trim().length>0&&(t[i]=a)}return t}(i);let s="";for(const e in a)"fen"===e.toLowerCase()&&(s=a[e]),this.header(e,a[e]);if(t){if("1"===a.SetUp){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,{preserveHeaders:!0})}}else s&&this.load(s,{preserveHeaders:!0});const c=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(r(n),"g")," ")).slice(1,e.length-1))}}`},l=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}(e.slice(1,e.length-1))};let u=e.replace(i,"").replace(new RegExp(`({[^}]*})+?|;([^${r(n)}]*)`,"g"),(function(e,t,n){return void 0!==t?c(t):" "+c(`{${n.slice(1)}}`)})).replace(new RegExp(r(n),"g")," ");const p=/(\([^()]+\))+?/g;for(;p.test(u);)u=u.replace(p,"");u=u.replace(/\d+\.(\.\.)?/g,""),u=u.replace(/\.\.\./g,""),u=u.replace(/\$\d+/g,"");let d=u.trim().split(new RegExp(/\s+/));d=d.filter((e=>""!==e));let f="";for(let e=0;e<d.length;e++){const n=l(d[e]);if(void 0!==n){this._comments[this.fen()]=n;continue}const r=this._moveFromSan(d[e],t);if(null==r){if(!(S.indexOf(d[e])>-1))throw new Error(`Invalid move in PGN: ${d[e]}`);f=d[e]}else f="",this._makeMove(r),this._incPositionCount(this.fen())}f&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",f)}_moveToSan(e,t){let n="";if(e.flags&f.KSIDE_CASTLE)n="O-O";else if(e.flags&f.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==i){const r=function(e,t){const n=e.from,r=e.to,o=e.piece;let i=0,a=0,s=0;for(let e=0,c=t.length;e<c;e++){const c=t[e].from,l=t[e].to;o===t[e].piece&&n!==c&&r===l&&(i++,C(n)===C(c)&&a++,_(n)===_(c)&&s++)}return i>0?a>0&&s>0?q(n):s>0?q(n).charAt(1):q(n).charAt(0):""}(e,t);n+=e.piece.toUpperCase()+r}e.flags&(f.CAPTURE|f.EP_CAPTURE)&&(e.piece===i&&(n+=q(e.from)[0]),n+="x"),n+=q(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){const n=I(e);let r,o,i,a,s,c=P(n),l=this._moves({legal:!0,piece:c});for(let e=0,t=l.length;e<t;e++)if(n===I(this._moveToSan(l[e],l)))return l[e];if(t)return null;let u=!1;if(o=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),o?(r=o[1],i=o[2],a=o[3],s=o[4],1==i.length&&(u=!0)):(o=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),o&&(r=o[1],i=o[2],a=o[3],s=o[4],1==i.length&&(u=!0))),c=P(n),l=this._moves({legal:!0,piece:r||c}),!a)return null;for(let e=0,t=l.length;e<t;e++)if(i){if(!(r&&r.toLowerCase()!=l[e].piece||h[i]!=l[e].from||h[a]!=l[e].to||s&&s.toLowerCase()!=l[e].promotion))return l[e];if(u){const t=q(l[e].from);if(!(r&&r.toLowerCase()!=l[e].piece||h[a]!=l[e].to||i!=t[0]&&i!=t[1]||s&&s.toLowerCase()!=l[e].promotion))return l[e]}}else if(n===I(this._moveToSan(l[e],l)).replace("x",""))return l[e];return null}ascii(){let e="   +------------------------+\n";for(let t=h.a8;t<=h.h1;t++){if(0===_(t)&&(e+=" "+"87654321"[C(t)]+" |"),this._board[t]){const n=this._board[t].type;e+=" "+(this._board[t].color===r?n.toUpperCase():n.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let n=0;const r=this._turn;for(let o=0,i=t.length;o<i;o++)this._makeMove(t[o]),this._isKingAttacked(r)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}_makePretty(e){const{color:t,piece:n,from:r,to:o,flags:i,captured:a,promotion:s}=e;let c="";for(const e in f)f[e]&i&&(c+=d[e]);const l=q(r),u=q(o),p={color:t,piece:n,from:l,to:u,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:l+u,before:this.fen(),after:""};return this._makeMove(e),p.after=this.fen(),this._undoMove(),a&&(p.captured=a),s&&(p.promotion=s,p.lan+=s),p}turn(){return this._turn}board(){const e=[];let t=[];for(let n=h.a8;n<=h.h1;n++)null==this._board[n]?t.push(null):t.push({square:q(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in h){const t=h[e];return(C(t)+_(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const r=t.pop();if(!r)break;e?n.push(this._makePretty(r)):n.push(this._moveToSan(r,this._moves())),this._makeMove(r)}return n}_getPositionCount(e){const t=D(e);return this._positionCount[t]||0}_incPositionCount(e){const t=D(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}_decPositionCount(e){const t=D(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}_pruneComments(){const e=[],t={},n=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const t=e.pop();if(!t)break;this._makeMove(t),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>({fen:e,comment:this._comments[e]})))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}}))}setCastlingRights(e,t){for(const n of[l,c])void 0!==t[n]&&(t[n]?this._castling[e]|=w[n]:this._castling[e]&=~w[n]);this._updateCastlingRights();const n=this.getCastlingRights(e);return!(void 0!==t[l]&&t[l]!==n[l]||void 0!==t[c]&&t[c]!==n[c])}getCastlingRights(e){return{[l]:!!(this._castling[e]&w[l]),[c]:!!(this._castling[e]&w[c])}}moveNumber(){return this._moveNumber}},te=L()("board",{draggable:!0,position:ee.fen(),onDrop:function(e,t){try{const n=ee.turn();if("w"===n&&ne||"b"===n)return console.log(`Snapback: Human trying to move for AI player ${n}`),"snapback";if(e===t)return"snapback";let r=ee.move({from:e,to:t});if(null===r&&(r=ee.move({from:e,to:t,promotion:"q"})),null===r)return console.warn(`User move failed: from ${e} to ${t}. Snapback.`),"snapback";Ae(r,(()=>{if(Oe(r),te.position(ee.fen()),ae(),fe(),xe.length>0&&xe.push(r),De(),!ye){const{whiteValue:e,blackValue:t}=he(),n=ge(e,t);if(console.log("After move - checking reinforcement:"),console.log("  Weaker player:",n),console.log("  Current turn:",ee.turn()),console.log("  Pending reinforcement:",ve?"Yes":"No"),n)if(ve&&ve.player===n)console.log("Updating existing reinforcement..."),Ee();else if(!ve){const e=me(n);console.log("Checking for valid reinforcement squares:",e),e.length>0&&(console.log("Valid squares found, applying reinforcement..."),ve={player:n},we(),ve.piece||(ve=null))}}ee.isGameOver()||"b"===ee.turn()&&(console.log("Human white moved, triggering Black AI."),Ie())}))}catch(e){return console.error("Error in handleMove (user move):",e),e.stack&&console.error("Stack:",e.stack),"snapback"}},onDragStart:function(e,t,n,r){if(ee.isGameOver())return!1;const o=ee.turn();return!("w"===o&&ne||"b"===o)&&!("w"===o&&-1!==t.search(/^b/)||"b"===o&&-1!==t.search(/^w/))},pieceTheme:function(e){return""}});let ne=!1,re=Date.now();const oe=new(Z()),ie={bP:"♟",bR:"♜",bN:"♞",bB:"♝",bQ:"♛",bK:"♚",wP:"♙",wR:"♖",wN:"♘",wB:"♗",wQ:"♕",wK:"♔"};function ae(){document.querySelectorAll("#board .unicode-piece").forEach((e=>e.remove()));const e=[];for(const t of"abcdefgh")for(const n of"12345678")e.push(t+n);for(const t of e){const e=ee.get(t);if(e){const n=e.color+e.type.toUpperCase(),r=ie[n],o=document.querySelector(`#board div[data-square="${t}"]`);if(r&&o){const t=document.createElement("span");t.classList.add("unicode-piece"),t.classList.add("w"===e.color?"white-piece":"black-piece"),t.textContent=r,o.appendChild(t)}else e&&!o&&console.warn(`Square element with data-square="${t}" not found for piece ${n}`)}}he()}const se=document.getElementById("whiteAiToggle");let ce,le;se&&se.addEventListener("change",(e=>{ne=e.target.checked,"w"===ee.turn()&&ne&&!ee.isGameOver()&&(console.log("White AI toggled on, making move for White."),Ne())}));try{ce=new Worker("stockfish.js"),le=new Worker("stockfish.js"),ce.onerror=function(e){return console.error("Stockfish worker error event:",e),e.message&&console.error("Stockfish worker error message:",e.message),e.error&&(console.error("Stockfish worker actual error object:",e.error),e.error.stack&&console.error("Stockfish worker error stack:",e.error.stack)),e.preventDefault&&e.preventDefault(),!0},le.onerror=function(e){return console.error("Stockfish eval worker error event:",e),e.preventDefault&&e.preventDefault(),!0}}catch(e){console.error("Failed to initialize Stockfish:",e),alert("Failed to load chess engine. Please refresh the page."),ce=null,le=null}let ue=4,pe=15;if(ce)try{ce.postMessage(`setoption name Threads value ${ue}`),ce.postMessage("setoption name Skill Level value 20"),ce.postMessage("uci")}catch(e){console.error("Error sending initial messages to Stockfish:",e)}if(le)try{le.postMessage("setoption name Threads value 1"),le.postMessage("setoption name Skill Level value 20"),le.postMessage("uci"),setTimeout((()=>{oe.setStockfishEval(le),console.log("Stockfish evaluator connected to Reinforcement AI")}),1e3)}catch(e){console.error("Error sending initial messages to Stockfish eval:",e)}let de=!1;function fe(){let e="",t=!1;ee.isCheckmate()?(e="Game over: "+("w"===ee.turn()?"Black":"White")+" wins by checkmate.",t=!0,je("w"===ee.turn()?"black":"white","checkmate")):ee.isDraw()?(e="Game over: Draw.",t=!0,je("draw","draw")):(e="Turn: "+("w"===ee.turn()?"White":"Black"),ee.isCheck()&&(e+=" (Check)")),document.getElementById("status").textContent=e}function he(){const e={p:1,n:3,b:3,r:5,q:9,k:0};let t=0,n=0;const r=ee.board();for(let o=0;o<8;o++)for(let i=0;i<8;i++){const a=r[o][i];if(a){const r=e[a.type];"w"===a.color?t+=r:n+=r}}document.getElementById("whiteValue").textContent=t,document.getElementById("blackValue").textContent=n;const o=t-n,i=document.getElementById("advantage");o>0?(i.textContent=`+${o}`,i.className="strength-advantage white-advantage"):o<0?(i.textContent=`${o}`,i.className="strength-advantage black-advantage"):(i.textContent="=",i.className="strength-advantage equal");const a=document.getElementById("strengthBar"),s=t+n;if(0===s)a.style.left="50%",a.style.width="0%";else{const e=n/s*100;if(o>0){const e=t/s*100-50;a.style.left=50-e+"%",a.style.width=`${e}%`,a.style.background="linear-gradient(90deg, rgba(244, 232, 208, 0.4), rgba(244, 232, 208, 0.8))"}else o<0?(a.style.left="50%",a.style.width=e-50+"%",a.style.background="linear-gradient(90deg, rgba(139, 127, 199, 0.8), rgba(139, 127, 199, 0.4))"):(a.style.left="50%",a.style.width="0%")}return{whiteValue:t,blackValue:n,advantage:o}}function ge(e,t){return e<t?"w":t<e?"b":null}function me(e){const t=[],n=ee.board();let r=-1,o=-1;for(let t=0;t<8;t++){for(let i=0;i<8;i++){const a=n[t][i];if(a&&"k"===a.type&&a.color===e){r=t,o=i;break}}if(-1!==r)break}if(-1===r)return t;if(ee.isCheck()||ee.isCheckmate())return t;const i="w"===e?0:7;if(r===i)return t;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[e,s]of a){const a=r+e,c=o+s;if(a>=0&&a<8&&c>=0&&c<8&&!n[a][c]){if(a===i)continue;const e=String.fromCharCode(97+c),n=8-a;t.push(e+n)}}return t}ce&&(ce.onmessage=function(e){try{const t=e.data;if("uciok"===t||"readyok"===t)console.log("Stockfish is ready.");else if(t.startsWith("info")){if(de){const e=t.match(/depth (\d+)/),n=t.match(/nodes (\d+)/),r=t.match(/pv\s+([a-h][1-8][a-h][1-8][qrbn]?)/);if(t.includes("pv")&&!r&&console.log("Info message with pv but no match:",t),e&&(document.getElementById("cpuDepth").textContent=`Depth: ${e[1]}`),n){const e=parseInt(n[1]),t=e>1e6?`${(e/1e6).toFixed(1)}M`:e>1e3?`${(e/1e3).toFixed(0)}K`:e;document.getElementById("cpuNodes").textContent=`Nodes: ${t}`}if(r){const e=r[1],t=e.substring(0,2),n=e.substring(2,4);document.getElementById("candidateMove").textContent=`Considering: ${t} → ${n}`,function(e,t){qe();const n="w"===ee.turn()?"white-thinking":"black-thinking",r=document.querySelector(`#board [data-square="${e}"]`),o=document.querySelector(`#board [data-square="${t}"]`);if(r){const e=r.querySelector(".unicode-piece");e&&e.classList.add("thinking-piece")}o&&o.classList.add("thinking-square",n)}(t,n)}}}else if(t.startsWith("bestmove")){Te();const e=t.split(" ")[1];if("(none)"===e)return void console.log("Stockfish indicated no valid moves (bestmove (none)).");const n=e.substring(0,2),r=e.substring(2,4),o=e.length>4?e.substring(4,5):null,i=o?ee.move({from:n,to:r,promotion:o}):ee.move({from:n,to:r});if(null===i)return console.error("Stockfish proposed an invalid move or the move failed. Raw move string:",e),Te(),void setTimeout((()=>{console.log("Retrying move calculation after invalid move suggestion..."),_e();const e=Math.min(10,Math.max(5,pe-5));ce.postMessage(`position fen ${ee.fen()}`),ce.postMessage(`go depth ${e} movetime 1000`)}),500);Ae(i,(()=>{if(Oe(i),te.position(ee.fen()),ae(),fe(),xe.length>0&&xe.push(i),De(),!ye){const{whiteValue:e,blackValue:t}=he(),n=ge(e,t);n&&(ve&&ve.player===n?Ee():ve||me(n).length>0&&(ve={player:n},we(),ve.piece||(ve=null)))}ee.isGameOver()||("w"===ee.turn()&&ne?(console.log("Stockfish moved. Now White AI's turn."),function(){if("w"===ee.turn()&&ve&&"w"===ve.player){const e=document.getElementById("reinforcementPiece");e&&e.classList.add("reinforcement-considering"),setTimeout((async()=>{if(await oe.shouldUseReinforcement(ee,ve)){console.log("Reinforcement AI decided White should use reinforcement now!");const e=oe.chooseBestSquare(ee,ve);if(e)return void function(e){if(!ve||"w"!==ve.player)return console.error("No valid white reinforcement to execute"),void Ne();const t=ve.piece,n=ve.player;if(!me(n).includes(e))return console.error(`Square ${e} is no longer valid for reinforcement!`),ve=null,Se(),void Ne();const r=ee.history({verbose:!0}),o=ee.fen().split(" ");let i=o[0];const a=e.charCodeAt(0)-97,s=8-parseInt(e[1]),c=i.split("/");let l=c[s],u="";for(let e of l)isNaN(e)?u+=e:u+=".".repeat(parseInt(e));const p=u[a];if(p&&"."!==p)return console.error(`Cannot place reinforcement on occupied square! Square ${e} contains ${p}`),ve=null,Se(),void setTimeout((()=>{ee.isGameOver()||ee.turn()!==n||Ne()}),100);const d="w"===n?t.toUpperCase():t.toLowerCase();u=u.substring(0,a)+d+u.substring(a+1);let f="",h=0;for(let e of u)"."===e?h++:(h>0&&(f+=h,h=0),f+=e);h>0&&(f+=h),c[s]=f,o[0]=c.join("/");const g=o.join(" ");ee.load(g),te.position(ee.fen()),ae(),fe();const m={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"}[t];xe=[...r],xe.push(`White ${m} → ${e}`),De(),Pe(e,"w"),ve=null,Se(),ye=!0,console.log(`White AI placed ${t} reinforcement on ${e}`),setTimeout((()=>{ee.isGameOver()||"w"!==ee.turn()||Ne()}),500)}(e)}else console.log("Reinforcement AI decided White should wait.");e&&e.classList.remove("reinforcement-considering"),Ne()}),1e3)}else Ne()}()):"b"===ee.turn()&&(console.log("Stockfish moved. Now Black AI's turn."),Ie()))}))}}catch(e){console.error("Error in stockfish.onmessage (engine response):",e),e.stack&&console.error("Stack:",e.stack)}});let ve=null,be=[],ye=!1,xe=[];function we(){if(ye)return;const{whiteValue:e,blackValue:t,advantage:n}=he(),r=ge(e,t);if(!r)return console.log("Material is equal, no reinforcement needed"),void(ye=!0);const o=Math.abs(n);if(be=me(r),0===be.length)return void console.log("No valid squares for reinforcement");const i=function(e){return e>=9?"q":e>=5?"r":e>=3?"b":e>=1?"p":null}(o);i?(ve={player:r,piece:i,validSquares:be},function(e,t){const n=document.getElementById("reinforcementContainer"),r=document.getElementById("reinforcementText"),o=document.getElementById("reinforcementPiece");if(!n||!r||!o)return void console.error("Reinforcement UI elements not found:",{container:!!n,textElement:!!r,reinforcementPieceDiv:!!o});let i=o.querySelector(".unicode-piece");i||(i=document.createElement("span"),i.className="unicode-piece",o.appendChild(i));const a={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"}[t],s={p:{white:"♙",black:"♟"},n:{white:"♘",black:"♞"},b:{white:"♗",black:"♝"},r:{white:"♖",black:"♜"},q:{white:"♕",black:"♛"}},c="w"===e?s[t].white:s[t].black;r.textContent=`${"w"===e?"White":"Black"} receives a ${a} reinforcement!`,i.textContent=c,i.className="unicode-piece "+("w"===e?"white-piece":"black-piece"),n.style.display="block",function(){const e=document.getElementById("reinforcementPiece"),t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),window.matchMedia("(max-width: 768px)").matches||"ontouchstart"in window?t.addEventListener("click",(e=>{e.preventDefault(),t.classList.contains("selected")?(t.classList.remove("selected"),document.querySelectorAll(".valid-reinforcement-square").forEach((e=>{e.classList.remove("mobile-placeable")}))):(t.classList.add("selected"),document.querySelectorAll(".valid-reinforcement-square").forEach((e=>{e.classList.add("mobile-placeable")})),document.getElementById("board").scrollIntoView({behavior:"smooth",block:"center"}))})):(t.addEventListener("dragstart",(e=>{e.target.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("reinforcement","true")})),t.addEventListener("dragend",(e=>{e.target.classList.remove("dragging")}))),setTimeout((()=>{const e=window.matchMedia("(max-width: 768px)").matches||"ontouchstart"in window;document.querySelectorAll("#board [data-square]").forEach((t=>{const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),e?n.addEventListener("click",(e=>{const t=n.getAttribute("data-square"),r=document.getElementById("reinforcementPiece");r&&r.classList.contains("selected")&&ve&&ve.validSquares.includes(t)&&(Ce(t),console.log("Reinforcement placed successfully via mobile tap"))})):(n.addEventListener("dragover",(e=>{const t=n.getAttribute("data-square");ve&&ve.validSquares.includes(t)&&(e.preventDefault(),e.dataTransfer.dropEffect="move",n.classList.add("drag-over"))})),n.addEventListener("dragleave",(e=>{n.classList.remove("drag-over")})),n.addEventListener("drop",(e=>{e.preventDefault(),n.classList.remove("drag-over");const t=n.getAttribute("data-square");"true"===e.dataTransfer.getData("reinforcement")&&ve&&ve.validSquares.includes(t)&&Ce(t)})))}))}),100)}()}(r,i),ke(be)):console.log("No reinforcement piece needed")}function ke(e){t()(".valid-reinforcement-square").removeClass("valid-reinforcement-square"),e.forEach((e=>{t()(`#board [data-square="${e}"]`).addClass("valid-reinforcement-square")}))}function Ee(){if(ve&&!ye){const e=ve.validSquares,t=me(ve.player);console.log("Updating reinforcement squares:"),console.log("  Old squares:",e),console.log("  New squares:",t),0===t.length?(Se(),ve=null,console.log("Reinforcement cancelled - no valid squares after king move")):(ve.validSquares=t,be=t,ke(t),console.log("Updated highlights for squares:",t))}}function Se(){const e=document.getElementById("reinforcementContainer");e&&(e.style.display="none"),t()(".valid-reinforcement-square").removeClass("valid-reinforcement-square")}function Ce(e){if(!ve)return;const{player:t,piece:n}=ve,r="w"===t?n.toUpperCase():n,o=ee.fen().split(" "),i=o[0],a=e.charCodeAt(0)-97,s=8-parseInt(e[1]),c=i.split("/");let l=c[s],u="",p=0;for(let e=0;e<l.length;e++){const t=l[e];if(isNaN(t))p===a&&(u+=r),u+=t,p++;else{const e=parseInt(t);if(p<=a&&a<p+e){const t=a-p,n=e-t-1;t>0&&(u+=t),u+=r,n>0&&(u+=n),p+=e}else u+=t,p+=e}}c[s]=u,o[0]=c.join("/");const d=o.join(" ");ee.load(d),te.position(ee.fen()),ae(),fe(),he(),Pe(e,t),console.log(`Reinforcement ${n} placed at ${e} for ${"w"===t?"White":"Black"}`),Se(),ve=null,be=[],ye=!0,"w"===ee.turn()&&ne&&!ee.isGameOver()&&(console.log("Reinforcement placed, White is AI, making move."),Ne())}function _e(){de=!0;const e=document.getElementById("cpuIndicator");e?(e.classList.add("active"),document.querySelectorAll(".cpu-core").forEach(((e,t)=>{t<ue?e.classList.add("active"):e.classList.remove("active")})),console.log(`CPU indicator shown for ${"w"===ee.turn()?"White":"Black"} thinking`)):console.error("CPU indicator element not found")}function Te(){de=!1,document.getElementById("cpuIndicator").classList.remove("active"),qe(),document.getElementById("cpuDepth").textContent="Depth: 0",document.getElementById("cpuNodes").textContent="Nodes: 0",document.getElementById("candidateMove").textContent=""}function qe(){document.querySelectorAll(".thinking-square").forEach((e=>{e.classList.remove("thinking-square","white-thinking","black-thinking")})),document.querySelectorAll(".thinking-piece").forEach((e=>{e.classList.remove("thinking-piece")}))}function Ae(e,t){const n=document.querySelector(`#board [data-square="${e.from}"]`),r=document.querySelector(`#board [data-square="${e.to}"]`),o=n?n.querySelector(".unicode-piece"):null;if(!o||!n||!r)return void(t&&t());const i=n.getBoundingClientRect(),a=r.getBoundingClientRect(),s=a.left-i.left,c=a.top-i.top,l=r.querySelector(".unicode-piece");l&&l!==o&&l.classList.add("captured-piece");const u=o.cloneNode(!0);u.classList.add("moving-piece"),u.style.position="fixed",u.style.left=i.left+"px",u.style.top=i.top+"px",u.style.width=i.width+"px",u.style.height=i.height+"px",document.body.appendChild(u),o.style.opacity="0",requestAnimationFrame((()=>{u.style.transform=`translate(${s}px, ${c}px)`})),setTimeout((()=>{u.remove(),t&&t()}),500)}function Ne(){if(ce){if(!ee.isGameOver())try{console.log("Making engine move for "+("w"===ee.turn()?"White":"Black")),_e();const e=ee.fen();ce.postMessage(`position fen ${e}`),ce.postMessage(`go depth ${pe}`)}catch(e){console.error("Error in makeEngineMove:",e),Te()}}else console.error("Stockfish not initialized")}function Pe(e,t){const n=document.querySelector(`#board [data-square="${e}"]`);if(!n)return;const r=n.querySelector(".unicode-piece");if(!r)return;const o="w"===t?"white-reinforcement":"black-reinforcement";r.classList.add("reinforcement-glow",o);const i=document.createElement("div");i.className="reinforcement-square-effect "+("w"===t?"white-effect":"black-effect"),n.appendChild(i),setTimeout((()=>{r.classList.remove("reinforcement-glow",o),i.remove()}),2500);const a=document.getElementById("board");a.style.boxShadow="w"===t?"0 0 100px rgba(244, 232, 208, 0.6), inset 0 0 50px rgba(244, 232, 208, 0.2)":"0 0 100px rgba(139, 127, 199, 0.6), inset 0 0 50px rgba(139, 127, 199, 0.2)",setTimeout((()=>{a.style.boxShadow=""}),1e3)}function Ie(){if("b"===ee.turn()&&ve&&"b"===ve.player){const e=document.getElementById("reinforcementPiece");e&&e.classList.add("reinforcement-considering"),setTimeout((async()=>{if(await oe.shouldUseReinforcement(ee,ve)){console.log("Reinforcement AI decided to use reinforcement now!");const e=oe.chooseBestSquare(ee,ve);if(e)return void function(e){if(!ve||"b"!==ve.player)return console.error("No valid black reinforcement to execute"),void Ne();const t=ve.piece,n=ve.player;if(!me(n).includes(e))return console.error(`Square ${e} is no longer valid for reinforcement!`),ve=null,Se(),void Ne();const r=ee.history({verbose:!0}),o=ee.fen().split(" ");let i=o[0];const a=e.charCodeAt(0)-97,s=8-parseInt(e[1]),c=i.split("/");let l=c[s],u="";for(let e of l)isNaN(e)?u+=e:u+=".".repeat(parseInt(e));const p=u[a];if(p&&"."!==p)return console.error(`Cannot place reinforcement on occupied square! Square ${e} contains ${p}`),ve=null,Se(),void setTimeout((()=>{ee.isGameOver()||ee.turn()!==n||Ne()}),100);const d="w"===n?t.toUpperCase():t.toLowerCase();u=u.substring(0,a)+d+u.substring(a+1);let f="",h=0;for(let e of u)"."===e?h++:(h>0&&(f+=h,h=0),f+=e);h>0&&(f+=h),c[s]=f,o[0]=c.join("/");const g=o.join(" ");ee.load(g),te.position(ee.fen()),ae(),fe();const m={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"}[t];xe=[...r],xe.push(`Black ${m} → ${e}`),De(),Pe(e,"b"),ve=null,Se(),ye=!0,console.log(`Black AI placed ${t} reinforcement on ${e}`),setTimeout((()=>{ee.isGameOver()||"b"!==ee.turn()||Ne()}),500)}(e)}else console.log("Reinforcement AI decided to wait.");e&&e.classList.remove("reinforcement-considering"),Ne()}),1e3)}else Ne()}function De(){const e=document.getElementById("history");e.innerHTML="";const t=xe.length>0?xe:ee.history({verbose:!0});0===xe.length&&(xe=[...t]),t.forEach(((t,n)=>{const r=Math.floor(n/2)+1,o=n%2==0,i="string"==typeof t?t:t.san;if(o){const t=document.createElement("li");t.innerHTML=`<strong>${r}.</strong> <span class="white-move">♔ ${i}</span>`,e.appendChild(t)}else e.lastChild.innerHTML+=` <span class="black-move">♚ ${i}</span>`}))}document.getElementById("startBtn").addEventListener("click",(()=>{try{const e=function(){const e=["r","n","b","q"],t=["r","n","b","q","p"],n=[2,2,2,1],r=[2,2,2,1,4];function o(e,t){const n=t.reduce(((e,t)=>e+t),0);let r=Math.random()*n;for(let n=0;n<e.length;n++)if(r-=t[n],r<=0)return e[n];return e[0]}function i(i,a){let s=[],c=i?Math.floor(8*Math.random()):-1;const l=a?e:t,u=a?n:r;for(let e=0;e<8;e++)e===c?s.push("k"):s.push(o(l,u));return s.join("")}let a=i(!0,!0),s=i(!1,!1),c=i(!1,!1),l=i(!0,!0);return l=l.toUpperCase(),c=c.toUpperCase(),`${a}/${s}/8/8/8/8/${c}/${l} w - - 0 1`}();console.log("Generated Garrison Chess position:",e),ye=!1,xe=[],re=Date.now(),ee.load(e),te.position(ee.fen()),ae(),fe(),De(),we(),"w"!==ee.turn()||!ne||ee.isGameOver()||ve||(console.log("Garrison game started, White is AI, making move."),Ne())}catch(e){console.error("Error in Start Garrison Game button click:",e),e.stack&&console.error("Stack:",e.stack),alert("Failed to create Garrison Chess position. It may have resulted in an illegal position.")}})),document.getElementById("undoBtn").addEventListener("click",(()=>{try{if(ee.undo(),te.position(ee.fen()),ae(),fe(),De(),!ee.isGameOver()){const e=ee.turn();"w"===e&&ne?(console.log("Undo resulted in White AI's turn, making move."),Ne()):"b"===e&&(console.log("Undo resulted in Black AI's turn, making move."),Ne())}}catch(e){console.error("Error in Undo Move button click:",e),e.stack&&console.error("Stack:",e.stack)}})),document.getElementById("applySettings").addEventListener("click",(()=>{try{const e=parseInt(document.getElementById("threads").value),t=parseInt(document.getElementById("depth").value);if(isNaN(e)||e<1||e>8)return void alert("Threads must be a number between 1 and 8.");if(isNaN(t)||t<1||t>20)return void alert("Depth must be a number between 1 and 20.");ue=e,pe=t,ce.postMessage(`setoption name Threads value ${ue}`),ce.postMessage("uci"),console.log(`Stockfish settings applied: Threads=${ue}, Depth=${pe}`)}catch(e){console.error("Error in Apply Settings button click:",e),e.stack&&console.error("Stack:",e.stack)}}));let Me="#a9a9a9",Le="#696969";function Oe(e){document.querySelectorAll(".square-55d63").forEach((e=>{e.style.background=""}));const t=e.from,n=e.to,r=document.querySelector(`#board [data-square="${t}"]`),o=document.querySelector(`#board [data-square="${n}"]`);r&&(r.style.background=Me),o&&(o.style.background=Le)}function je(e,t){const n=document.getElementById("gameOverOverlay"),r=document.getElementById("gameOverMessage"),o=document.querySelector(".game-over-crown"),i=document.getElementById("totalMoves"),a=document.getElementById("gameDuration"),s=Date.now()-re,c=Math.floor(s/6e4),l=Math.floor(s%6e4/1e3);a.textContent=`${c}:${l.toString().padStart(2,"0")}`,i.textContent=ee.history().length,"white"===e?(r.textContent="White Wins!",r.className="game-over-message white-wins",o.textContent="♔",o.style.color="#f4e8d0"):"black"===e?(r.textContent="Black Wins!",r.className="game-over-message black-wins",o.textContent="♚",o.style.color="#8b7fc7"):(r.textContent="Draw!",r.className="game-over-message draw",o.textContent="♔♚",o.style.color="rgba(255, 255, 255, 0.7)"),"checkmate"===t?r.innerHTML+='<br><span style="font-size: 16px; opacity: 0.8;">by checkmate</span>':"stalemate"===t?r.innerHTML+='<br><span style="font-size: 16px; opacity: 0.8;">by stalemate</span>':"draw"===t&&(r.innerHTML+='<br><span style="font-size: 16px; opacity: 0.8;">by agreement</span>'),n.classList.add("show")}function Re(){document.getElementById("gameOverOverlay").classList.remove("show")}fe(),De(),requestAnimationFrame((()=>{ae()})),setTimeout((()=>{document.getElementById("startBtn").click()}),200),document.getElementById("newGameBtn").addEventListener("click",(()=>{Re(),document.getElementById("startBtn").click()})),document.getElementById("gameOverOverlay").addEventListener("click",(e=>{"gameOverOverlay"===e.target.id&&Re()}))})()})();